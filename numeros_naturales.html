<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“œ Historia de los NÃºmeros Naturales - Viaje a travÃ©s del Tiempo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .tab-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .tab-btn.active {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            transform: scale(1.05);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .activity-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .historical-card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            color: #333;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .civilization-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            color: #333;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .civilization-card:hover {
            transform: scale(1.02);
        }

        .input-group {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        input[type="number"], input[type="text"] {
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            background: rgba(255,255,255,0.9);
            min-width: 100px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .result-box {
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            color: #333;
            min-height: 50px;
            font-size: 16px;
        }

        .number-display {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .number-card {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 24px;
            font-weight: bold;
            min-width: 60px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .number-card:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .timeline {
            position: relative;
            max-width: 1000px;
            margin: 20px auto;
        }

        .timeline-item {
            display: flex;
            margin: 20px 0;
            animation: slideIn 0.8s ease forwards;
            opacity: 0;
        }

        .timeline-item:nth-child(even) {
            flex-direction: row-reverse;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .timeline-content {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            flex: 1;
            margin: 0 20px;
            position: relative;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .timeline-date {
            background: #ff6b6b;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            font-weight: bold;
            position: absolute;
            top: -10px;
            left: 20px;
        }

        .numeral-converter {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            color: white;
        }

        .conversion-display {
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            color: #333;
            text-align: center;
            font-size: 20px;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .game-area {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            color: white;
        }

        .quiz-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            color: #333;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .score-board {
            background: linear-gradient(45deg, #ffd89b, #19547b);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 10px 0;
            font-size: 18px;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
            width: 0%;
            transition: width 0.5s ease;
        }

        .ancient-numerals {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .numeral-system {
            background: rgba(255,255,255,0.9);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .numeral-system:hover {
            transform: scale(1.05);
        }

        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            display: none;
            z-index: 1000;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2rem; }
            .nav-tabs { gap: 5px; }
            .tab-btn { padding: 8px 16px; font-size: 14px; }
            .container { padding: 10px; }
            .section { padding: 20px; }
            .timeline-item { flex-direction: column !important; }
            .ancient-numerals { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“œ Viaje a travÃ©s del Tiempo: Los NÃºmeros Naturales</h1>
        <p style="font-size: 18px; color: #666;">Â¡Descubre cÃ³mo la humanidad aprendiÃ³ a contar!</p>
        
        <div class="nav-tabs">
            <button class="tab-btn active" onclick="showSection('intro')">ğŸš€ Inicio</button>
            <button class="tab-btn" onclick="showSection('origins')">ğŸº OrÃ­genes</button>
            <button class="tab-btn" onclick="showSection('civilizations')">ğŸ›ï¸ Civilizaciones</button>
            <button class="tab-btn" onclick="showSection('evolution')">ğŸ“ˆ EvoluciÃ³n</button>
            <button class="tab-btn" onclick="showSection('converter')">ğŸ”„ Convertidor</button>
            <button class="tab-btn" onclick="showSection('games')">ğŸ® Juegos</button>
        </div>

        <div class="score-board">
            ğŸŒŸ Conocimiento: <span id="totalScore">0</span> puntos | ğŸ”¥ Descubrimientos: <span id="discoveries">0</span>
        </div>
    </div>

    <div class="container">
        <!-- SecciÃ³n IntroducciÃ³n -->
        <div class="section active" id="intro">
            <h2 style="text-align: center; color: #4a5568; margin-bottom: 20px;">ğŸ¯ Â¡Bienvenido al fascinante mundo de los nÃºmeros!</h2>
            <p style="font-size: 18px; line-height: 1.6; text-align: center;">
                Los nÃºmeros naturales son los primeros nÃºmeros que aprendiÃ³ la humanidad. Desde hacer marcas en huesos hasta los elegantes 
                dÃ­gitos que usamos hoy, cada nÃºmero cuenta una historia de miles de aÃ±os de ingenio humano.
            </p>
            
            <div class="activity-card">
                <h3>ğŸ¯ Tu aventura incluirÃ¡:</h3>
                <ul style="font-size: 16px; line-height: 1.8;">
                    <li>Explorar los primeros sistemas de conteo humanos</li>
                    <li>Viajar por antiguas civilizaciones y sus nÃºmeros</li>
                    <li>Descubrir cÃ³mo llegamos a los nÃºmeros indoarÃ¡bigos</li>
                    <li>Convertir entre diferentes sistemas numerales</li>
                    <li>Jugar con desafÃ­os histÃ³ricos divertidos</li>
                </ul>
            </div>

            <div class="number-display">
                <div class="number-card" onclick="animateNumber(this)">1</div>
                <div class="number-card" onclick="animateNumber(this)">2</div>
                <div class="number-card" onclick="animateNumber(this)">3</div>
                <div class="number-card" onclick="animateNumber(this)">4</div>
                <div class="number-card" onclick="animateNumber(this)">5</div>
                <div class="number-card" onclick="animateNumber(this)">6</div>
                <div class="number-card" onclick="animateNumber(this)">7</div>
                <div class="number-card" onclick="animateNumber(this)">8</div>
                <div class="number-card" onclick="animateNumber(this)">9</div>
                <div class="number-card" onclick="animateNumber(this)">0</div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="showSection('origins')" style="font-size: 18px;">
                    ğŸš€ Â¡Comenzar el viaje temporal!
                </button>
            </div>
        </div>

        <!-- SecciÃ³n OrÃ­genes -->
        <div class="section" id="origins">
            <h2 style="color: #4a5568; margin-bottom: 20px;">ğŸº Los Primeros Pasos del Conteo</h2>
            
            <div class="historical-card">
                <h3>ğŸ¦´ El Hueso de Ishango (Â±20,000 a.C.)</h3>
                <p style="margin-bottom: 15px;">
                    En el corazÃ³n de Ãfrica, nuestros ancestros ya hacÃ­an marcas en huesos para contar. 
                    El famoso hueso de Ishango es una de las primeras evidencias de matemÃ¡ticas humanas.
                </p>
                <div class="input-group">
                    <button class="btn" onclick="showIshango()">ğŸ” Ver Marcas del Ishango</button>
                    <button class="btn" onclick="simulateCount()">âœ‹ Simular Conteo con Dedos</button>
                </div>
                <div id="ishangoResult" class="result-box"></div>
            </div>

            <div class="historical-card">
                <h3>âœ‹ El Conteo con Dedos - Base Universal</h3>
                <p>Los dedos fueron la primera "calculadora" humana. Por eso muchas culturas desarrollaron sistemas decimales.</p>
                <div class="input-group">
                    <label>Cuenta hasta:</label>
                    <input type="number" id="fingerCount" min="1" max="20" value="10">
                    <button class="btn" onclick="demonstrateFinger()">âœ‹ Demostrar</button>
                </div>
                <div id="fingerResult" class="result-box"></div>
            </div>

            <div class="activity-card">
                <h3>ğŸ¯ Sistemas de Conteo Primitivos</h3>
                <p>Diferentes culturas desarrollaron maneras Ãºnicas de representar cantidades:</p>
                <div class="ancient-numerals">
                    <div class="numeral-system" onclick="showSystem('tallies')">
                        <h4>Marcas de Conteo</h4>
                        <div style="font-size: 24px;">||||  ||||</div>
                        <p>Sistema mÃ¡s antiguo</p>
                    </div>
                    <div class="numeral-system" onclick="showSystem('knots')">
                        <h4>Nudos Incas (Quipu)</h4>
                        <div style="font-size: 24px;">ğŸª¢ğŸª¢ğŸª¢</div>
                        <p>Cuerdas anudadas</p>
                    </div>
                    <div class="numeral-system" onclick="showSystem('stones')">
                        <h4>Piedrecitas</h4>
                        <div style="font-size: 24px;">â—â—â—â—â—</div>
                        <p>Origen de "calcular"</p>
                    </div>
                </div>
                <div id="systemResult" class="result-box"></div>
            </div>
        </div>

        <!-- SecciÃ³n Civilizaciones -->
        <div class="section" id="civilizations">
            <h2 style="color: #4a5568; margin-bottom: 20px;">ğŸ›ï¸ Grandes Civilizaciones y sus NÃºmeros</h2>
            
            <div class="timeline">
                <div class="timeline-item" style="animation-delay: 0.2s;">
                    <div class="timeline-content">
                        <div class="timeline-date">3000 a.C.</div>
                        <h3>ğŸº Mesopotamia - Cuneiforme</h3>
                        <p>Los sumerios desarrollaron el primer sistema posicional en base 60. Â¡AÃºn lo usamos para tiempo y Ã¡ngulos!</p>
                        <button class="btn" onclick="showCuneiform()" style="margin-top: 10px;">Ver NÃºmeros</button>
                    </div>
                </div>

                <div class="timeline-item" style="animation-delay: 0.4s;">
                    <div class="timeline-content">
                        <div class="timeline-date">2000 a.C.</div>
                        <h3>ğŸ« Egipto - JeroglÃ­ficos</h3>
                        <p>SÃ­mbolos Ãºnicos para potencias de 10. Una flor de loto representaba 1000.</p>
                        <button class="btn" onclick="showEgyptian()" style="margin-top: 10px;">Ver JeroglÃ­ficos</button>
                    </div>
                </div>

                <div class="timeline-item" style="animation-delay: 0.6s;">
                    <div class="timeline-content">
                        <div class="timeline-date">800 a.C.</div>
                        <h3>ğŸ›ï¸ Grecia - Alfabeto NumÃ©rico</h3>
                        <p>Usaron letras de su alfabeto para representar nÃºmeros. Â¡Muy prÃ¡ctico!</p>
                        <button class="btn" onclick="showGreek()" style="margin-top: 10px;">Ver Sistema</button>
                    </div>
                </div>

                <div class="timeline-item" style="animation-delay: 0.8s;">
                    <div class="timeline-content">
                        <div class="timeline-date">500 a.C.</div>
                        <h3>ğŸ›ï¸ Roma - Numerales Romanos</h3>
                        <p>I, V, X, L, C, D, M - un sistema que perdurÃ³ por siglos en Europa.</p>
                        <button class="btn" onclick="showRoman()" style="margin-top: 10px;">Ver Numerales</button>
                    </div>
                </div>

                <div class="timeline-item" style="animation-delay: 1.0s;">
                    <div class="timeline-content">
                        <div class="timeline-date">500 d.C.</div>
                        <h3>ğŸ•‰ï¸ India - El Gran Salto</h3>
                        <p>Â¡AquÃ­ nace nuestro sistema actual! Inventaron el cero y la notaciÃ³n posicional decimal.</p>
                        <button class="btn" onclick="showIndian()" style="margin-top: 10px;">Ver InnovaciÃ³n</button>
                    </div>
                </div>

                <div class="timeline-item" style="animation-delay: 1.2s;">
                    <div class="timeline-content">
                        <div class="timeline-date">800 d.C.</div>
                        <h3>ğŸ•Œ Mundo Ãrabe - Los Transmisores</h3>
                        <p>Los matemÃ¡ticos Ã¡rabes perfeccionaron y difundieron el sistema indio por el mundo.</p>
                        <button class="btn" onclick="showArabic()" style="margin-top: 10px;">Ver DifusiÃ³n</button>
                    </div>
                </div>
            </div>

            <div id="civilizationDisplay" class="result-box"></div>
        </div>

        <!-- SecciÃ³n EvoluciÃ³n -->
        <div class="section" id="evolution">
            <h2 style="color: #4a5568; margin-bottom: 20px;">ğŸ“ˆ La EvoluciÃ³n hacia Nuestro Sistema Actual</h2>
            
            <div class="activity-card">
                <h3>ğŸ” El Poder del Cero</h3>
                <p>El cero fue el invento mÃ¡s revolucionario. Â¡TransformÃ³ las matemÃ¡ticas para siempre!</p>
                <div class="input-group">
                    <button class="btn" onclick="demonstrateZero()">ğŸš€ Ver el Poder del Cero</button>
                    <button class="btn" onclick="showZeroHistory()">ğŸ“š Historia del Cero</button>
                </div>
                <div id="zeroResult" class="result-box"></div>
            </div>

            <div class="historical-card">
                <h3>ğŸŒ La Llegada a Europa</h3>
                <p>Leonardo Fibonacci introdujo los nÃºmeros indoarÃ¡bigos a Europa en 1202 con su "Liber Abaci".</p>
                <div class="comparison-display" style="background: white; border-radius: 10px; padding: 20px; margin: 15px 0;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div style="text-align: center;">
                            <h4>Antes (Romano)</h4>
                            <div style="font-size: 24px; color: #e74c3c;">MCMLIV</div>
                            <p>DifÃ­cil para calcular</p>
                        </div>
                        <div style="text-align: center;">
                            <h4>DespuÃ©s (IndoarÃ¡bigo)</h4>
                            <div style="font-size: 24px; color: #27ae60;">1954</div>
                            <p>FÃ¡cil y eficiente</p>
                        </div>
                    </div>
                </div>
                <button class="btn" onclick="showFibonacci()">ğŸ“– Ver ContribuciÃ³n de Fibonacci</button>
                <div id="fibonacciResult" class="result-box"></div>
            </div>

            <div class="activity-card">
                <h3>âš–ï¸ Ventajas del Sistema Actual</h3>
                <p>Â¿Por quÃ© triunfaron los nÃºmeros indoarÃ¡bigos?</p>
                <div class="input-group">
                    <button class="btn" onclick="compareCalculation()">ğŸ§® Comparar CÃ¡lculos</button>
                    <button class="btn" onclick="showAdvantages()">âœ¨ Ver Ventajas</button>
                </div>
                <div id="advantagesResult" class="result-box"></div>
            </div>
        </div>

        <!-- SecciÃ³n Convertidor -->
        <div class="section" id="converter">
            <h2 style="color: #4a5568; margin-bottom: 20px;">ğŸ”„ Convertidor de Sistemas Numerales</h2>
            
            <div class="numeral-converter">
                <h3>ğŸ¯ Convertidor Universal</h3>
                <p>Â¡Convierte nÃºmeros entre diferentes sistemas histÃ³ricos!</p>
                
                <div class="input-group">
                    <label>NÃºmero decimal:</label>
                    <input type="number" id="decimalInput" min="1" max="3999" value="42">
                    <button class="btn" onclick="convertNumber()">ğŸ”„ Convertir Todo</button>
                </div>

                <div class="conversion-display" id="conversionResults">
                    Ingresa un nÃºmero para ver las conversiones
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                    <button class="btn" onclick="convertToSpecific('roman')">ğŸ›ï¸ Solo Romano</button>
                    <button class="btn" onclick="convertToSpecific('egyptian')">ğŸ« Solo Egipcio</button>
                    <button class="btn" onclick="convertToSpecific('binary')">ğŸ’» Solo Binario</button>
                    <button class="btn" onclick="convertToSpecific('babylonian')">ğŸº Solo Babilonio</button>
                </div>
            </div>

            <div class="activity-card">
                <h3>ğŸ® DesafÃ­o de ConversiÃ³n</h3>
                <p>Â¿Puedes convertir correctamente entre sistemas?</p>
                <div class="input-group">
                    <button class="btn" onclick="startConversionGame()">ğŸ¯ Nuevo DesafÃ­o</button>
                    <input type="text" id="conversionAnswer" placeholder="Tu respuesta">
                    <button class="btn" onclick="checkConversionAnswer()">âœ… Verificar</button>
                </div>
                <div id="conversionGame" class="result-box">Â¡Presiona "Nuevo DesafÃ­o" para comenzar!</div>
                <div id="conversionScore" class="score-board" style="margin-top: 10px;">Conversiones correctas: 0</div>
            </div>
        </div>

        <!-- SecciÃ³n Juegos -->
        <div class="section" id="games">
            <h2 style="color: #4a5568; margin-bottom: 20px;">ğŸ® Juegos HistÃ³ricos</h2>
            
            <div class="game-area">
                <h3>âš¡ Trivia HistÃ³rica</h3>
                <p>Â¡Pon a prueba tus conocimientos sobre la historia de los nÃºmeros!</p>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="gameProgress"></div>
                </div>

                <div id="gameQuestion" class="quiz-card">
                    <h4 id="questionText">Â¡Presiona "Nueva Pregunta" para comenzar!</h4>
                    <div class="input-group" style="justify-content: center;">
                        <input type="text" id="gameAnswer" placeholder="Tu respuesta">
                        <button class="btn" onclick="checkGameAnswer()">âœ… Responder</button>
                        <button class="btn" onclick="newGameQuestion()">ğŸ¯ Nueva Pregunta</button>
                    </div>
                    <div id="gameResult" style="margin-top: 10px; font-weight: bold;"></div>
                </div>

                <div style="display: flex; gap: 20px; justify-content: center; margin-top: 20px;">
                    <div style="text-align: center;">
                        <div style="font-size: 24px;">â±ï¸</div>
                        <div>Tiempo: <span id="gameTime">60</span>s</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 24px;">ğŸ¯</div>
                        <div>Correctas: <span id="gameScore">0</span></div>
                    </div>
                </div>
            </div>

            <div class="activity-card">
                <h3>ğŸº ArqueÃ³logo de NÃºmeros</h3>
                <p>Â¡Descifra sistemas numerales antiguos como un verdadero arqueÃ³logo!</p>
                <div class="input-group">
                    <button class="btn" onclick="startArchaeologyGame()">ğŸ” Nueva ExcavaciÃ³n</button>
                </div>
                <div id="archaeologyGame" class="result-box">
                    Â¡Comienza una excavaciÃ³n para descubrir nÃºmeros antiguos!
                </div>
            </div>
        </div>
    </div>

    <div class="celebration" id="celebration">
        <h2>ğŸ‰ Â¡Descubrimiento IncreÃ­ble!</h2>
        <p id="celebrationMessage"></p>
        <button class="btn" onclick="closeCelebration()">Continuar Explorando</button>
    </div>

    <script>
        let totalScore = 0;
        let discoveries = 0;
        let gameTime = 60;
        let gameActive = false;
        let gameTimer;
        let currentGameAnswer = '';
        let conversionGameScore = 0;
        let currentConversionChallenge = {};

        function showSection(sectionName) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            
            document.getElementById(sectionName).classList.add('active');
            
            const tabs = document.querySelectorAll('.tab-btn');
            tabs.forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
        }

        function updateScore(points) {
            totalScore += points;
            discoveries += 1;
            document.getElementById('totalScore').textContent = totalScore;
            document.getElementById('discoveries').textContent = discoveries;
        }

        function showCelebration(message) {
            document.getElementById('celebrationMessage').textContent = message;
            document.getElementById('celebration').style.display = 'block';
            setTimeout(() => {
                closeCelebration();
            }, 3000);
        }

        function closeCelebration() {
            document.getElementById('celebration').style.display = 'none';
        }

        function animateNumber(element) {
            element.style.transform = 'scale(1.5) rotate(360deg)';
            element.style.background = 'linear-gradient(45deg, #ff6b6b, #4ecdc4)';
            setTimeout(() => {
                element.style.transform = '';
                element.style.background = '';
            }, 500);
        }

        function showIshango() {
            const marks = '||||  ||||  |||  ||||||  |||||  |||  ||';
            document.getElementById('ishangoResult').innerHTML = 
                `<strong>ğŸ¦´ Marcas del Hueso de Ishango:</strong><br>
                <div style="font-family: monospace; font-size: 18px; background: #f0f0f0; padding: 10px; border-radius: 5px; margin: 10px 0;">
                ${marks}
                </div>
                <p>Estas marcas sugieren conocimiento de nÃºmeros primos y secuencias matemÃ¡ticas bÃ¡sicas. 
                Â¡Los humanos ya hacÃ­an matemÃ¡ticas hace 20,000 aÃ±os!</p>`;
            updateScore(10);
        }

        function simulateCount() {
            document.getElementById('ishangoResult').innerHTML = 
                `<strong>âœ‹ Conteo Primitivo:</strong><br>
                <div style="display: flex; gap: 20px; align-items: center; margin: 15px 0;">
                    <div>ğŸ‘† 1</div>
                    <div>âœŒï¸ 2</div>
                    <div>ğŸ¤Ÿ 3</div>
                    <div>ğŸ–– 4</div>
                    <div>ğŸ–ï¸ 5</div>
                    <div>ğŸ™Œ 10</div>
                </div>
                <p>Los dedos fueron la primera calculadora universal. Por eso muchos sistemas son decimales (base 10).</p>`;
            updateScore(5);
        }

        function demonstrateFinger() {
            const count = parseInt(document.getElementById('fingerCount').value) || 10;
            let display = '';
            let hands = Math.floor(count / 10);
            let fingers = count % 10;
            
            for (let i = 0; i < hands; i++) {
                display += 'ğŸ™Œ ';
            }
            for (let i = 0; i < fingers; i++) {
                display += 'ğŸ‘†';
            }
            
            document.getElementById('fingerResult').innerHTML = 
                `<strong>Contando hasta ${count}:</strong><br>
                <div style="font-size: 24px; margin: 10px 0;">${display}</div>
                <p>${hands > 0 ? `${hands} mano(s) completa(s) + ` : ''}${fingers} dedo(s) = ${count}</p>`;
            updateScore(5);
        }

        function showSystem(type) {
            let content = '';
            switch(type) {
                case 'tallies':
                    content = `
                        <h4>ğŸº Sistema de Marcas (PaleolÃ­tico)</h4>
                        <div style="font-family: monospace; font-size: 20px;">
                        1: |<br>
                        2: ||<br>
                        3: |||<br>
                        4: ||||<br>
                        5: ||||Ì¸<br>
                        10: ||||Ì¸ ||||Ì¸
                        </div>
                        <p>El sistema mÃ¡s antiguo y universal. Cada marca = una unidad.</p>
                    `;
                    break;
                case 'knots':
                    content = `
                        <h4>ğŸª¢ Quipu Inca (1400-1500 d.C.)</h4>
                        <p>Los incas usaban cuerdas con nudos de colores para:</p>
                        <ul>
                        <li>Contar poblaciÃ³n y recursos</li>
                        <li>Registrar fechas importantes</li>
                        <li>Llevar contabilidad del imperio</li>
                        </ul>
                        <p>Â¡Un sistema decimal sin escritura!</p>
                    `;
                    break;
                case 'stones':
                    content = `
                        <h4>â— Sistema de Piedrecitas</h4>
                        <p>Los pastores usaban piedras para contar ovejas:</p>
                        <div style="font-size: 20px; margin: 10px 0;">
                        1 oveja = â— una piedra<br>
                        10 ovejas = â—â—â—â—â— â—â—â—â—â—
                        </div>
                        <p>La palabra "cÃ¡lculo" viene del latÃ­n "calculus" = piedrecita.</p>
                    `;
                    break;
            }
            document.getElementById('systemResult').innerHTML = content;
            updateScore(8);
        }

        function showCuneiform() {
            document.getElementById('civilizationDisplay').innerHTML = `
                <h3>ğŸº Sistema Cuneiforme BabilÃ³nico</h3>
                <p>Los babilonios usaron el primer sistema posicional de la historia (base 60):</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 15px; margin: 20px 0;">
                    <div style="text-align: center; background: #f0f0f0; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">ğ’•</div>
                        <p>1</p>
                    </div>
                    <div style="text-align: center; background: #f0f0f0; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">ğ’Œ‹</div>
                        <p>10</p>
                    </div>
                    <div style="text-align: center; background: #f0f0f0; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">ğ’•ğ’Œ‹</div>
                        <p>60</p>
                    </div>
                </div>
                <p>Â¡Su legado: 60 segundos, 60 minutos, 360 grados!</p>
            `;
            updateScore(15);
        }

        function showEgyptian() {
            document.getElementById('civilizationDisplay').innerHTML = `
                <h3>ğŸ« Numerales JeroglÃ­ficos Egipcios</h3>
                <p>Cada sÃ­mbolo representa una potencia de 10:</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin: 20px 0;">
                    <div style="text-align: center; background: #ffe8d6; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">ğ“º</div>
                        <p>1</p>
                    </div>
                    <div style="text-align: center; background: #ffe8d6; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">ğ“†</div>
                        <p>10</p>
                    </div>
                    <div style="text-align: center; background: #ffe8d6; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">ğ“¢</div>
                        <p>100</p>
                    </div>
                    <div style="text-align: center; background: #ffe8d6; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">ğ“†¼</div>
                        <p>1,000 (flor de loto)</p>
                    </div>
                </div>
                <p>Ejemplo: 1,234 = ğ“†¼ğ“¢ğ“¢ğ“†ğ“†ğ“†ğ“ºğ“ºğ“ºğ“º</p>
            `;
            updateScore(15);
        }

        function showGreek() {
            document.getElementById('civilizationDisplay').innerHTML = `
                <h3>ğŸ›ï¸ Sistema NumÃ©rico Griego</h3>
                <p>Usaron letras del alfabeto para representar nÃºmeros:</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 10px; margin: 20px 0;">
                    <div style="text-align: center; background: #e8f4fd; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">Î±</div>
                        <p>1</p>
                    </div>
                    <div style="text-align: center; background: #e8f4fd; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">Î²</div>
                        <p>2</p>
                    </div>
                    <div style="text-align: center; background: #e8f4fd; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">Î¹</div>
                        <p>10</p>
                    </div>
                    <div style="text-align: center; background: #e8f4fd; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">Ï</div>
                        <p>100</p>
                    </div>
                </div>
                <p>Sistema muy prÃ¡ctico para escribir, pero difÃ­cil para calcular.</p>
            `;
            updateScore(15);
        }

        function showRoman() {
            document.getElementById('civilizationDisplay').innerHTML = `
                <h3>ğŸ›ï¸ Numerales Romanos</h3>
                <p>El sistema mÃ¡s duradero de Europa:</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 10px; margin: 20px 0;">
                    <div style="text-align: center; background: #ffeaa7; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">I</div>
                        <p>1</p>
                    </div>
                    <div style="text-align: center; background: #ffeaa7; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">V</div>
                        <p>5</p>
                    </div>
                    <div style="text-align: center; background: #ffeaa7; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">X</div>
                        <p>10</p>
                    </div>
                    <div style="text-align: center; background: #ffeaa7; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">C</div>
                        <p>100</p>
                    </div>
                    <div style="text-align: center; background: #ffeaa7; padding: 10px; border-radius: 5px;">
                        <div style="font-size: 24px;">M</div>
                        <p>1000</p>
                    </div>
                </div>
                <p>Ejemplo: MCMLIV = 1954. Â¡AÃºn se usa en relojes y monumentos!</p>
            `;
            updateScore(15);
        }

        function showIndian() {
            document.getElementById('civilizationDisplay').innerHTML = `
                <h3>ğŸ•‰ï¸ La RevoluciÃ³n India</h3>
                <p>Â¡AquÃ­ comienza nuestro sistema actual!</p>
                <div style="background: #d1f2eb; padding: 20px; border-radius: 10px; margin: 15px 0;">
                    <h4>ğŸš€ Grandes Innovaciones:</h4>
                    <ul style="font-size: 16px; line-height: 1.8;">
                        <li><strong>El Cero (à¤¶à¥‚à¤¨à¥à¤¯ - Shunya):</strong> Concepto revolucionario</li>
                        <li><strong>NotaciÃ³n Posicional:</strong> El valor depende de la posiciÃ³n</li>
                        <li><strong>Base Decimal:</strong> Sistema de 10 dÃ­gitos</li>
                        <li><strong>Brahmi y Devanagari:</strong> Ancestros de nuestros nÃºmeros</li>
                    </ul>
                </div>
                <div style="text-align: center; font-size: 24px; margin: 20px 0;">
                    Original: à¥¦ à¥§ à¥¨ à¥© à¥ª à¥« à¥¬ à¥­ à¥® à¥¯<br>
                    Actual: &nbsp;&nbsp;0 1 2 3 4 5 6 7 8 9
                </div>
            `;
            updateScore(20);
        }

        function showArabic() {
            document.getElementById('civilizationDisplay').innerHTML = `
                <h3>ğŸ•Œ La DifusiÃ³n Ãrabe</h3>
                <p>Los matemÃ¡ticos Ã¡rabes perfeccionaron y extendieron el sistema indio:</p>
                <div style="background: #fef9e7; padding: 20px; border-radius: 10px; margin: 15px 0;">
                    <h4>ğŸ“š Grandes Contribuciones:</h4>
                    <ul style="font-size: 16px; line-height: 1.8;">
                        <li><strong>Al-Juarismi (820 d.C.):</strong> "Sobre el cÃ¡lculo con numerales hindÃºes"</li>
                        <li><strong>TraducciÃ³n al Ãrabe:</strong> Preservaron el conocimiento</li>
                        <li><strong>Mejoras en Ãlgebra:</strong> Facilitaron los cÃ¡lculos</li>
                        <li><strong>DifusiÃ³n Comercial:</strong> Por las rutas de comercio</li>
                    </ul>
                </div>
                <p>Por eso se llaman "nÃºmeros arÃ¡bigos" en Occidente, aunque su origen sea indio.</p>
            `;
            updateScore(20);
        }

        function demonstrateZero() {
            document.getElementById('zeroResult').innerHTML = `
                <h4>ğŸš€ El Poder del Cero</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
                    <div style="background: #ffebee; padding: 15px; border-radius: 5px;">
                        <h5>âŒ Sin Cero</h5>
                        <p>No se podÃ­a distinguir:</p>
                        <div style="font-family: monospace;">
                        15 (quince)<br>
                        15_ (ciento cincuenta?)
                        </div>
                    </div>
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px;">
                        <h5>âœ… Con Cero</h5>
                        <p>Claridad total:</p>
                        <div style="font-family: monospace;">
                        15 (quince)<br>
                        150 (ciento cincuenta)
                        </div>
                    </div>
                </div>
                <p><strong>Â¡El cero hizo posible la matemÃ¡tica moderna!</strong></p>
            `;
            updateScore(15);
        }

        function showZeroHistory() {
            document.getElementById('zeroResult').innerHTML = `
                <h4>ğŸ“š Historia del Cero</h4>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 5px;">
                    <p><strong>ğŸ“… LÃ­nea de tiempo:</strong></p>
                    <ul style="line-height: 1.8;">
                        <li><strong>Babilonios (400 a.C.):</strong> Espacio en blanco como marcador</li>
                        <li><strong>Mayas (200 d.C.):</strong> SÃ­mbolo de concha para cero</li>
                        <li><strong>India (628 d.C.):</strong> Brahmagupta define el cero matemÃ¡tico</li>
                        <li><strong>Ãrabes (820 d.C.):</strong> Al-Juarismi lo introduce en Ã¡lgebra</li>
                        <li><strong>Europa (1202):</strong> Fibonacci lo lleva a Occidente</li>
                    </ul>
                </div>
                <p>Â¡El cero tardÃ³ 1600 aÃ±os en llegar de India a Europa!</p>
            `;
            updateScore(10);
        }

        function showFibonacci() {
            document.getElementById('fibonacciResult').innerHTML = `
                <h4>ğŸ“– Leonardo Fibonacci (1170-1250)</h4>
                <div style="background: #e3f2fd; padding: 15px; border-radius: 5px;">
                    <p><strong>Su libro "Liber Abaci" (1202) cambiÃ³ Europa:</strong></p>
                    <blockquote style="font-style: italic; margin: 10px 0; padding: 10px; background: white; border-left: 4px solid #2196f3;">
                    "Los nueve sÃ­mbolos indios son: 9 8 7 6 5 4 3 2 1. 
                    Con estos nueve sÃ­mbolos, y con el sÃ­mbolo 0... 
                    cualquier nÃºmero puede escribirse."
                    </blockquote>
                    <p><strong>Impacto:</strong></p>
                    <ul>
                        <li>Comerciantes adoptaron el nuevo sistema</li>
                        <li>FacilitÃ³ el comercio internacional</li>
                        <li>AcelerÃ³ el desarrollo cientÃ­fico</li>
                        <li>Hizo obsoletos los Ã¡bacos</li>
                    </ul>
                </div>
            `;
            updateScore(15);
        }

        function compareCalculation() {
            document.getElementById('advantagesResult').innerHTML = `
                <h4>âš–ï¸ ComparaciÃ³n de Sistemas</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 15px 0;">
                    <div style="background: #ffebee; padding: 15px; border-radius: 5px;">
                        <h5>ğŸ›ï¸ Sistema Romano</h5>
                        <p><strong>Suma:</strong> CCXIV + LXVII = ?</p>
                        <p style="font-size: 12px; color: #666;">
                        (214 + 67 = 281)<br>
                        Resultado: CCLXXXI
                        </p>
                        <p><strong>Â¡Muy complicado! ğŸ˜µ</strong></p>
                    </div>
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 5px;">
                        <h5>ğŸ•‰ï¸ Sistema IndoarÃ¡bigo</h5>
                        <p><strong>Suma:</strong> 214 + 67 = ?</p>
                        <pre style="font-family: monospace; background: white; padding: 5px;">
  214
+  67
-----
  281</pre>
                        <p><strong>Â¡FÃ¡cil y rÃ¡pido! ğŸš€</strong></p>
                    </div>
                </div>
            `;
            updateScore(10);
        }

        function showAdvantages() {
            document.getElementById('advantagesResult').innerHTML = `
                <h4>âœ¨ Ventajas del Sistema Actual</h4>
                <div style="background: #f1f8e9; padding: 20px; border-radius: 10px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: white; padding: 15px; border-radius: 5px;">
                            <h5>ğŸ¯ NotaciÃ³n Posicional</h5>
                            <p>El valor depende de la posiciÃ³n: 123 vs 321</p>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 5px;">
                            <h5>â­• El Cero</h5>
                            <p>Permite representar la nada y actÃºa como marcador</p>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 5px;">
                            <h5>ğŸ”Ÿ Base Decimal</h5>
                            <p>Solo 10 sÃ­mbolos para infinitos nÃºmeros</p>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 5px;">
                            <h5>ğŸ§® CÃ¡lculo FÃ¡cil</h5>
                            <p>Algoritmos simples para todas las operaciones</p>
                        </div>
                    </div>
                </div>
            `;
            updateScore(15);
        }

        function convertNumber() {
            const decimal = parseInt(document.getElementById('decimalInput').value) || 0;
            if (decimal < 1 || decimal > 3999) {
                document.getElementById('conversionResults').innerHTML = 'Por favor ingresa un nÃºmero entre 1 y 3999';
                return;
            }

            const conversions = {
                'Romano': toRoman(decimal),
                'Binario': decimal.toString(2),
                'Egipcio': toEgyptian(decimal),
                'BabilÃ³nico': `Base 60: ${toBabylonian(decimal)}`
            };

            let html = `<h4>NÃºmero ${decimal} en diferentes sistemas:</h4>`;
            for (let system in conversions) {
                html += `<div style="margin: 10px 0; padding: 10px; background: rgba(255,255,255,0.5); border-radius: 5px;">
                    <strong>${system}:</strong> ${conversions[system]}
                </div>`;
            }

            document.getElementById('conversionResults').innerHTML = html;
            updateScore(5);
        }

        function toRoman(num) {
            const values = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1];
            const symbols = ['M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X', 'IX', 'V', 'IV', 'I'];
            let result = '';
            
            for (let i = 0; i < values.length; i++) {
                while (num >= values[i]) {
                    result += symbols[i];
                    num -= values[i];
                }
            }
            return result;
        }

        function toEgyptian(num) {
            const symbols = ['ğ“†¼', 'ğ“¢', 'ğ“†', 'ğ“º'];
            const values = [1000, 100, 10, 1];
            let result = '';
            
            for (let i = 0; i < values.length; i++) {
                const count = Math.floor(num / values[i]);
                result += symbols[i].repeat(count);
                num %= values[i];
            }
            return result || 'ğ“º';
        }

        function toBabylonian(num) {
            const base60 = [];
            while (num > 0) {
                base60.unshift(num % 60);
                num = Math.floor(num / 60);
            }
            return base60.length > 0 ? base60.join(', ') : '0';
        }

        function convertToSpecific(system) {
            const decimal = parseInt(document.getElementById('decimalInput').value) || 42;
            let result = '';
            
            switch(system) {
                case 'roman':
                    result = `${decimal} en Romano: <strong>${toRoman(decimal)}</strong>`;
                    break;
                case 'egyptian':
                    result = `${decimal} en Egipcio: <strong>${toEgyptian(decimal)}</strong>`;
                    break;
                case 'binary':
                    result = `${decimal} en Binario: <strong>${decimal.toString(2)}</strong>`;
                    break;
                case 'babylonian':
                    result = `${decimal} en BabilÃ³nico: <strong>${toBabylonian(decimal)}</strong>`;
                    break;
            }
            
            document.getElementById('conversionResults').innerHTML = result;
            updateScore(3);
        }

        function startConversionGame() {
            const systems = [
                {from: 'decimal', to: 'roman', name: 'Romano'},
                {from: 'roman', to: 'decimal', name: 'Decimal'},
                {from: 'decimal', to: 'binary', name: 'Binario'},
                {from: 'binary', to: 'decimal', name: 'Decimal'}
            ];
            
            const challenge = systems[Math.floor(Math.random() * systems.length)];
            let question = '';
            let answer = '';
            
            if (challenge.from === 'decimal' && challenge.to === 'roman') {
                const num = Math.floor(Math.random() * 100) + 1;
                question = `Convierte ${num} a nÃºmeros romanos`;
                answer = toRoman(num);
            } else if (challenge.from === 'roman' && challenge.to === 'decimal') {
                const num = Math.floor(Math.random() * 50) + 1;
                const roman = toRoman(num);
                question = `Â¿QuÃ© nÃºmero decimal es ${roman}?`;
                answer = num.toString();
            } else if (challenge.from === 'decimal' && challenge.to === 'binary') {
                const num = Math.floor(Math.random() * 32) + 1;
                question = `Convierte ${num} a binario`;
                answer = num.toString(2);
            } else if (challenge.from === 'binary' && challenge.to === 'decimal') {
                const num = Math.floor(Math.random() * 32) + 1;
                const binary = num.toString(2);
                question = `Â¿QuÃ© nÃºmero decimal es ${binary} en binario?`;
                answer = num.toString();
            }
            
            currentConversionChallenge = {question, answer};
            document.getElementById('conversionGame').innerHTML = `<strong>ğŸ¯ DesafÃ­o:</strong> ${question}`;
            document.getElementById('conversionAnswer').value = '';
        }

        function checkConversionAnswer() {
            const userAnswer = document.getElementById('conversionAnswer').value.trim().toUpperCase();
            const correctAnswer = currentConversionChallenge.answer.toUpperCase();
            
            if (userAnswer === correctAnswer) {
                conversionGameScore++;
                document.getElementById('conversionGame').innerHTML = 
                    `<strong style="color: green;">âœ… Â¡Correcto!</strong><br>
                    ${currentConversionChallenge.question}<br>
                    Respuesta: ${currentConversionChallenge.answer}`;
                updateScore(10);
                showCelebration('Â¡Excelente conversiÃ³n!');
            } else {
                document.getElementById('conversionGame').innerHTML = 
                    `<strong style="color: red;">âŒ Incorrecto</strong><br>
                    ${currentConversionChallenge.question}<br>
                    La respuesta correcta era: ${currentConversionChallenge.answer}`;
            }
            
            document.getElementById('conversionScore').textContent = `Conversiones correctas: ${conversionGameScore}`;
        }

        const triviaQuestions = [
            {
                question: "Â¿En quÃ© civilizaciÃ³n se inventÃ³ el cero?",
                answer: "India",
                options: ["India", "Babilonia", "Egipto", "Grecia"]
            },
            {
                question: "Â¿QuÃ© significa 'calculus' en latÃ­n?",
                answer: "Piedrecita",
                options: ["Piedrecita", "NÃºmero", "Contar", "MatemÃ¡tica"]
            },
            {
                question: "Â¿En quÃ© aÃ±o Fibonacci escribiÃ³ el Liber Abaci?",
                answer: "1202",
                options: ["1202", "1150", "1250", "1300"]
            },
            {
                question: "Â¿QuÃ© base usaban los babilonios?",
                answer: "60",
                options: ["60", "10", "12", "20"]
            },
            {
                question: "Â¿CÃ³mo se llama 'cero' en sÃ¡nscrito?",
                answer: "Shunya",
                options: ["Shunya", "Brahma", "Kali", "Vishnu"]
            }
        ];

        function newGameQuestion() {
            if (gameActive) return;
            
            gameActive = true;
            gameTime = 60;
            document.getElementById('gameScore').textContent = '0';
            
            gameTimer = setInterval(() => {
                gameTime--;
                document.getElementById('gameTime').textContent = gameTime;
                document.getElementById('gameProgress').style.width = ((60 - gameTime) / 60 * 100) + '%';
                
                if (gameTime <= 0) {
                    endGame();
                }
            }, 1000);

            generateGameQuestion();
        }

        function generateGameQuestion() {
            if (!gameActive) return;

            const question = triviaQuestions[Math.floor(Math.random() * triviaQuestions.length)];
            currentGameAnswer = question.answer;
            
            document.getElementById('questionText').innerHTML = `
                <strong>${question.question}</strong><br>
                <div style="margin-top: 10px;">
                    ${question.options.map(opt => 
                        `<button class="btn" onclick="selectOption('${opt}')" style="margin: 5px; padding: 8px 12px; font-size: 14px;">${opt}</button>`
                    ).join('')}
                </div>
            `;
            document.getElementById('gameAnswer').style.display = 'none';
            document.getElementById('gameResult').textContent = '';
        }

        function selectOption(option) {
            document.getElementById('gameAnswer').value = option;
            checkGameAnswer();
        }

        function checkGameAnswer() {
            if (!gameActive) return;

            const userAnswer = document.getElementById('gameAnswer').value.trim();
            const resultDiv = document.getElementById('gameResult');
            
            if (userAnswer.toLowerCase() === currentGameAnswer.toLowerCase()) {
                resultDiv.innerHTML = '<span style="color: green;">âœ… Â¡Correcto! +15 puntos</span>';
                updateScore(15);
                let currentScore = parseInt(document.getElementById('gameScore').textContent);
                document.getElementById('gameScore').textContent = currentScore + 1;
                
                setTimeout(() => {
                    generateGameQuestion();
                }, 1500);
            } else {
                resultDiv.innerHTML = `<span style="color: red;">âŒ Incorrecto. La respuesta era: ${currentGameAnswer}</span>`;
                
                setTimeout(() => {
                    generateGameQuestion();
                }, 2000);
            }
        }

        function endGame() {
            gameActive = false;
            clearInterval(gameTimer);
            
            const finalScore = parseInt(document.getElementById('gameScore').textContent);
            let message = '';
            
            if (finalScore >= 10) {
                message = 'ğŸ† Â¡Eres un experto en historia matemÃ¡tica!';
            } else if (finalScore >= 7) {
                message = 'ğŸ¯ Â¡Excelente conocimiento histÃ³rico!';
            } else if (finalScore >= 4) {
                message = 'ğŸ‘ Â¡Buen trabajo explorando la historia!';
            } else {
                message = 'ğŸ’ª Â¡Sigue descubriendo mÃ¡s sobre los nÃºmeros!';
            }
            
            showCelebration(message + ` Respondiste ${finalScore} preguntas correctamente.`);
            
            document.getElementById('questionText').innerHTML = 'Â¡Juego terminado! Presiona "Nueva Pregunta" para jugar otra vez.';
            document.getElementById('gameProgress').style.width = '0%';
            gameTime = 60;
            document.getElementById('gameTime').textContent = gameTime;
            document.getElementById('gameAnswer').style.display = 'inline-block';
        }

        function startArchaeologyGame() {
            const discoveries = [
                {
                    site: "Cueva de Blombos, SudÃ¡frica",
                    period: "70,000 a.C.",
                    finding: "Marcas en ocre rojo - Â¿primeros sÃ­mbolos matemÃ¡ticos?",
                    significance: "Evidencia temprana de pensamiento abstracto"
                },
                {
                    site: "Lebombo, Suazilandia", 
                    period: "35,000 a.C.",
                    finding: "Hueso con 29 marcas - Â¿calendario lunar?",
                    significance: "Posible seguimiento de ciclos naturales"
                },
                {
                    site: "Ishango, Congo",
                    period: "20,000 a.C.", 
                    finding: "Hueso con series numÃ©ricas complejas",
                    significance: "Conocimiento de nÃºmeros primos y duplicaciÃ³n"
                },
                {
                    site: "Jiahu, China",
                    period: "8,000 a.C.",
                    finding: "SÃ­mbolos en caparazones de tortuga",
                    significance: "Precursores de la escritura numÃ©rica china"
                },
                {
                    site: "Uruk, Mesopotamia",
                    period: "3,200 a.C.",
                    finding: "Primeras tablillas con nÃºmeros cuneiformes",
                    significance: "Inicio de la escritura numÃ©rica formal"
                }
            ];

            const discovery = discoveries[Math.floor(Math.random() * discoveries.length)];
            
            document.getElementById('archaeologyGame').innerHTML = `
                <div style="background: linear-gradient(135deg, #8B4513, #D2691E); color: white; padding: 20px; border-radius: 10px;">
                    <h4>ğŸº Â¡Nueva ExcavaciÃ³n!</h4>
                    <div style="background: rgba(255,255,255,0.9); color: #333; padding: 15px; border-radius: 5px; margin: 10px 0;">
                        <p><strong>ğŸ“ Sitio:</strong> ${discovery.site}</p>
                        <p><strong>ğŸ“… PerÃ­odo:</strong> ${discovery.period}</p>
                        <p><strong>ğŸ” Hallazgo:</strong> ${discovery.finding}</p>
                        <p><strong>ğŸ’¡ Importancia:</strong> ${discovery.significance}</p>
                    </div>
                    <div style="text-align: center; margin-top: 15px;">
                        <button class="btn" onclick="startArchaeologyGame()">ğŸ” Nueva ExcavaciÃ³n</button>
                        <button class="btn" onclick="catalogDiscovery('${discovery.site}')">ğŸ“š Catalogar Descubrimiento</button>
                    </div>
                </div>
            `;
            
            updateScore(12);
        }

        function catalogDiscovery(site) {
            showCelebration(`Â¡Descubrimiento de ${site} catalogado! Has contribuido al conocimiento histÃ³rico.`);
            updateScore(8);
        }

        // InicializaciÃ³n
        document.addEventListener('DOMContentLoaded', function() {
            // AnimaciÃ³n de timeline
            const timelineItems = document.querySelectorAll('.timeline-item');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animationPlayState = 'running';
                    }
                });
            });

            timelineItems.forEach(item => {
                observer.observe(item);
            });

            // Efectos en botones
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    this.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        this.style.transform = '';
                    }, 100);
                });
            });

            // Atajos de teclado
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Enter' && gameActive) {
                    checkGameAnswer();
                }
                
                if (event.key === 'Escape') {
                    closeCelebration();
                }
            });
        });

        // Datos histÃ³ricos adicionales
        const historicalFacts = [
            "Los antiguos comerciantes fenicios ayudaron a difundir los sistemas numÃ©ricos por el MediterrÃ¡neo.",
            "El concepto de 'infinito' fue desarrollado por matemÃ¡ticos indios mucho antes que en Europa.",
            "Los nÃºmeros negativos fueron aceptados primero en China e India, pero rechazados en Europa por siglos.",
            "El sÃ­mbolo '+' para suma no se usÃ³ hasta el siglo XV en Europa.",
            "Los decimales se usaron en China desde el siglo I, pero llegaron a Europa en el siglo XVI.",
            "La palabra 'algoritmo' viene de Al-Juarismi, el matemÃ¡tico persa del siglo IX.",
            "Los antiguos egipcios podÃ­an hacer fracciones, pero solo con numerador 1 (excepto 2/3)."
        ];

        function showRandomFact() {
            const fact = historicalFacts[Math.floor(Math.random() * historicalFacts.length)];
            showCelebration(`ğŸ’¡ Dato histÃ³rico: ${fact}`);
        }

        // Mostrar datos histÃ³ricos periÃ³dicamente
        setInterval(showRandomFact, 180000); // Cada 3 minutos

        // Sistema de logros
        const achievements = {
            'first_discovery': { name: 'Primer Descubrimiento', points: 50, unlocked: false },
            'history_expert': { name: 'Experto en Historia', points: 100, unlocked: false },
            'conversion_master': { name: 'Maestro de Conversiones', points: 75, unlocked: false },
            'archaeologist': { name: 'ArqueÃ³logo NÃºmeros', points: 60, unlocked: false }
        };

        function checkAchievements() {
            if (discoveries >= 5 && !achievements.first_discovery.unlocked) {
                achievements.first_discovery.unlocked = true;
                showCelebration(`ğŸ† Â¡Logro desbloqueado! ${achievements.first_discovery.name}`);
                updateScore(achievements.first_discovery.points);
            }
            
            if (totalScore >= 200 && !achievements.history_expert.unlocked) {
                achievements.history_expert.unlocked = true;
                showCelebration(`ğŸ† Â¡Logro desbloqueado! ${achievements.history_expert.name}`);
                updateScore(achievements.history_expert.points);
            }
            
            if (conversionGameScore >= 10 && !achievements.conversion_master.unlocked) {
                achievements.conversion_master.unlocked = true;
                showCelebration(`ğŸ† Â¡Logro desbloqueado! ${achievements.conversion_master.name}`);
                updateScore(achievements.conversion_master.points);
            }
        }

        // Verificar logros periÃ³dicamente
        setInterval(checkAchievements, 5000);

        // FunciÃ³n para reiniciar progreso
        function resetProgress() {
            if (confirm('Â¿EstÃ¡s seguro de que quieres reiniciar tu progreso de exploraciÃ³n histÃ³rica?')) {
                totalScore = 0;
                discoveries = 0;
                conversionGameScore = 0;
                document.getElementById('totalScore').textContent = '0';
                document.getElementById('discoveries').textContent = '0';
                
                // Reiniciar logros
                for (let key in achievements) {
                    achievements[key].unlocked = false;
                }
                
                showCelebration('Â¡Progreso reiniciado! Â¡Comienza una nueva aventura histÃ³rica! ğŸš€');
            }
        }

        // FunciÃ³n para compartir progreso
        function shareProgress() {
            const message = `Â¡He descubierto ${discoveries} secretos matemÃ¡ticos y conseguido ${totalScore} puntos explorando la historia de los nÃºmeros naturales! ğŸ“œâœ¨`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Mi Viaje por la Historia MatemÃ¡tica',
                    text: message,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(message).then(() => {
                    showCelebration('Â¡Progreso copiado al portapapeles!');
                });
            }
        }

        // Simulador de evoluciÃ³n de nÃºmeros
        function simulateEvolution() {
            const stages = [
                { period: "PaleolÃ­tico", method: "Marcas en huesos", symbol: "||||" },
                { period: "NeolÃ­tico", method: "Piedras y nudos", symbol: "â—â—â—â—" },
                { period: "AntigÃ¼edad", method: "SÃ­mbolos especÃ­ficos", symbol: "ğ“ºğ“ºğ“ºğ“º" },
                { period: "ClÃ¡sico", method: "Sistemas posicionales", symbol: "IIII" },
                { period: "Medieval", method: "NÃºmeros indoarÃ¡bigos", symbol: "4" }
            ];
            
            let currentStage = 0;
            const evolutionDiv = document.createElement('div');
            evolutionDiv.style.cssText = `
                position: fixed; top: 20%; left: 50%; transform: translateX(-50%);
                background: white; padding: 30px; border-radius: 15px;
                box-shadow: 0 8px 32px rgba(0,0,0,0.3); z-index: 1001;
                text-align: center; min-width: 300px;
            `;
            
            function showStage() {
                if (currentStage < stages.length) {
                    const stage = stages[currentStage];
                    evolutionDiv.innerHTML = `
                        <h3>ğŸ“ˆ EvoluciÃ³n del NÃºmero 4</h3>
                        <div style="background: #f0f0f0; padding: 20px; border-radius: 10px; margin: 15px 0;">
                            <h4>${stage.period}</h4>
                            <div style="font-size: 32px; margin: 10px 0;">${stage.symbol}</div>
                            <p>${stage.method}</p>
                        </div>
                        <button class="btn" onclick="nextStage()" style="margin: 10px;">Siguiente â†’</button>
                        <button class="btn" onclick="closeEvolution()" style="margin: 10px;">Cerrar</button>
                    `;
                    currentStage++;
                } else {
                    evolutionDiv.innerHTML = `
                        <h3>ğŸ‰ Â¡EvoluciÃ³n Completa!</h3>
                        <p>Has visto como el nÃºmero 4 evolucionÃ³ a travÃ©s de miles de aÃ±os.</p>
                        <p><strong>Â¡Un viaje de 40,000 aÃ±os de innovaciÃ³n humana!</strong></p>
                        <button class="btn" onclick="closeEvolution()">Cerrar</button>
                    `;
                    updateScore(25);
                }
            }
            
            window.nextStage = showStage;
            window.closeEvolution = () => {
                document.body.removeChild(evolutionDiv);
                delete window.nextStage;
                delete window.closeEvolution;
            };
            
            document.body.appendChild(evolutionDiv);
            showStage();
        }

        // Agregar botÃ³n de evoluciÃ³n a la pÃ¡gina
        document.addEventListener('DOMContentLoaded', function() {
            const introSection = document.getElementById('intro');
            const evolutionButton = document.createElement('button');
            evolutionButton.className = 'btn';
            evolutionButton.style.cssText = 'font-size: 16px; margin: 10px;';
            evolutionButton.textContent = 'ğŸ“ˆ Ver EvoluciÃ³n del NÃºmero 4';
            evolutionButton.onclick = simulateEvolution;
            
            const buttonContainer = introSection.querySelector('div[style*="text-align: center"]');
            if (buttonContainer) {
                buttonContainer.appendChild(evolutionButton);
            }
        });
    </script>
</body>
</html>