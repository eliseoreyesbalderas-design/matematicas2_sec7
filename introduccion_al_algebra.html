<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§® IntroducciÃ³n al Ãlgebra - Aventura de los SÃ­mbolos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 18px;
            color: #666;
            margin-bottom: 20px;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
            position: relative;
            overflow: hidden;
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .tab-btn:hover::before {
            left: 100%;
        }

        .tab-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 35px rgba(255, 107, 107, 0.4);
        }

        .tab-btn.active {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.4);
        }

        .score-display {
            background: linear-gradient(45deg, #ffd89b, #19547b);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin: 15px 0;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 35px;
            margin: 25px 0;
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
            display: none;
            animation: slideInUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .section::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #f5576c);
            border-radius: 25px;
            z-index: -1;
            animation: borderGlow 3s ease-in-out infinite alternate;
        }

        .section.active {
            display: block;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes borderGlow {
            0% { opacity: 0.5; }
            100% { opacity: 0.8; }
        }

        .story-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            color: white;
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.3);
            position: relative;
            overflow: hidden;
        }

        .story-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 2s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        .activity-card {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            color: white;
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.3);
            position: relative;
        }

        .historical-card {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            color: #2c3e50;
            box-shadow: 0 8px 25px rgba(255, 154, 158, 0.3);
        }

        .input-group {
            display: flex;
            gap: 15px;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        input[type="number"], input[type="text"], select {
            padding: 14px 18px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            background: rgba(255,255,255,0.95);
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        input[type="number"]:focus, input[type="text"]:focus, select:focus {
            outline: none;
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 20px rgba(78, 205, 196, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        .btn:hover::after {
            width: 200px;
            height: 200px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(78, 205, 196, 0.4);
        }

        .btn:active {
            transform: translateY(0px);
        }

        .result-box {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            color: #333;
            min-height: 60px;
            font-size: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .result-box.success {
            border-left: 5px solid #27ae60;
            background: linear-gradient(135deg, #d5f4e6 0%, #feffff 100%);
        }

        .result-box.error {
            border-left: 5px solid #e74c3c;
            background: linear-gradient(135deg, #fadbd8 0%, #feffff 100%);
        }

        .equation-display {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            text-align: center;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .variable-box {
            display: inline-block;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 10px;
            margin: 5px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
        }

        .variable-box:hover {
            transform: scale(1.1) rotate(5deg);
        }

        .timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transform: translateX(-50%);
        }

        .timeline-item {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            width: 45%;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .timeline-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.15);
        }

        .timeline-item:nth-child(odd) {
            left: 0;
        }

        .timeline-item:nth-child(even) {
            left: 55%;
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            right: -10px;
            top: 50%;
            width: 20px;
            height: 20px;
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            border-radius: 50%;
            transform: translateY(-50%);
            border: 3px solid white;
        }

        .timeline-item:nth-child(even)::after {
            left: -10px;
            right: auto;
        }

        .quiz-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            color: #333;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }

        .quiz-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.2);
        }

        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            display: none;
            z-index: 1000;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .celebration.show {
            display: block;
            transform: translate(-50%, -50%) scale(1);
        }

        .celebration-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            display: none;
            z-index: 999;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2.2rem; }
            .nav-tabs { gap: 8px; }
            .tab-btn { padding: 10px 18px; font-size: 14px; }
            .container { padding: 15px; }
            .section { padding: 20px; margin: 15px 0; }
            .input-group { flex-direction: column; align-items: stretch; }
            .input-group > * { margin: 5px 0; }
            .timeline-item { width: 90%; left: 5% !important; }
            .timeline::before { left: 20px; }
            .timeline-item::after { left: -30px !important; }
        }

        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255,255,255,0.6);
            border-radius: 50%;
            animation: float 8s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0; }
            50% { transform: translateY(-100vh) rotate(360deg); opacity: 1; }
        }

        .algebra-playground {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            color: white;
            box-shadow: 0 12px 40px rgba(102, 126, 234, 0.3);
        }

        .term {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 10px 15px;
            border-radius: 10px;
            margin: 5px;
            border: 2px dashed rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .term:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        .term.selected {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            border: 2px solid white;
        }

        .balance-scale {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
        }

        .scale-side {
            flex: 1;
            text-align: center;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 15px;
            margin: 0 10px;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
        }

        .equals-sign {
            font-size: 2em;
            font-weight: bold;
            color: white;
        }
    </style>
</head>
<body>
    <div class="floating-particles" id="particles"></div>
    
    <div class="header">
        <h1>ğŸ§® IntroducciÃ³n al Ãlgebra</h1>
        <p class="subtitle">Â¡Descubre el poder de los sÃ­mbolos matemÃ¡ticos!</p>
        
        <div class="nav-tabs">
            <button class="tab-btn active" onclick="showSection('intro')">ğŸŒŸ MisiÃ³n</button>
            <button class="tab-btn" onclick="showSection('history')">ğŸ“š Historia</button>
            <button class="tab-btn" onclick="showSection('basics')">ğŸ¯ Conceptos</button>
            <button class="tab-btn" onclick="showSection('variables')">ğŸ”¤ Variables</button>
            <button class="tab-btn" onclick="showSection('equations')">âš–ï¸ Ecuaciones</button>
            <button class="tab-btn" onclick="showSection('practice')">ğŸ® PrÃ¡ctica</button>
            <button class="tab-btn" onclick="showSection('realworld')">ğŸŒ Aplicaciones</button>
        </div>

        <div class="score-display">
            ğŸ† Puntos Algebraicos: <span id="totalScore">0</span> | ğŸ”¥ Racha: <span id="streak">0</span> | â­ Nivel: <span id="level">Aprendiz</span>
        </div>
    </div>

    <div class="container">
        <!-- SecciÃ³n IntroducciÃ³n -->
        <div class="section active" id="intro">
            <h2 style="text-align: center; color: #4a5568; margin-bottom: 25px;">ğŸŒŸ Tu MisiÃ³n Algebraica</h2>
            
            <div class="story-card">
                <h3>ğŸ—ï¸ Â¡Bienvenido, Explorador de SÃ­mbolos!</h3>
                <p style="font-size: 18px; line-height: 1.8;">
                    Hace miles de aÃ±os, los matemÃ¡ticos descubrieron que podÃ­an usar letras para representar nÃºmeros desconocidos. 
                    Este descubrimiento revolucionÃ³ las matemÃ¡ticas y nos dio una herramienta increÃ­blemente poderosa: Â¡el Ã¡lgebra!
                </p>
                <br>
                <p style="font-size: 16px; line-height: 1.6;">
                    Como un detective matemÃ¡tico, aprenderÃ¡s a descifrar los misterios de las variables, resolver ecuaciones 
                    y encontrar valores ocultos. Â¿EstÃ¡s listo para convertirte en un maestro del Ã¡lgebra?
                </p>
            </div>

            <div class="activity-card">
                <h3>ğŸ¯ Objetivos de tu Aventura:</h3>
                <div style="font-size: 16px; line-height: 1.8;">
                    <p>ğŸ“œ Conocer la fascinante historia del Ã¡lgebra</p>
                    <p>ğŸ”¤ Entender quÃ© son las variables y cÃ³mo usarlas</p>
                    <p>âš–ï¸ Aprender a resolver ecuaciones simples</p>
                    <p>ğŸ® Practicar con juegos interactivos</p>
                    <p>ğŸŒ Descubrir cÃ³mo el Ã¡lgebra se usa en la vida real</p>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="showSection('variables')">
                    ğŸ”¤ Descubrir Variables
                </button>
            </div>
        </div>

        <!-- SecciÃ³n Historia -->
        <div class="section" id="history">
            <h2 style="color: #4a5568; margin-bottom: 25px;">ğŸ“š La Historia del Ãlgebra</h2>
            
            <div class="story-card">
                <h3>ğŸº Los OrÃ­genes Antiguos</h3>
                <p style="font-size: 17px; line-height: 1.7;">
                    El Ã¡lgebra no naciÃ³ de la noche a la maÃ±ana. Durante miles de aÃ±os, diferentes civilizaciones contribuyeron 
                    a su desarrollo. Los antiguos babilonios ya resolvÃ­an problemas algebraicos hace 4000 aÃ±os, Â¡aunque sin usar 
                    las letras que conocemos hoy!
                </p>
                <br>
                <p style="font-size: 16px;">
                    Los egipcios tambiÃ©n tenÃ­an sus propios mÃ©todos para resolver problemas con cantidades desconocidas. 
                    Llamaban a lo desconocido "aha", que significa "montÃ³n".
                </p>
            </div>

            <div class="timeline">
                <div class="timeline-item">
                    <h4>ğŸº 2000 a.C. - Babilonia</h4>
                    <p>Los babilonios resolvÃ­an ecuaciones cuadrÃ¡ticas usando tablillas de arcilla. Desarrollaron mÃ©todos para encontrar raÃ­ces sin usar sÃ­mbolos modernos.</p>
                </div>
                
                <div class="timeline-item">
                    <h4>ğŸº 1650 a.C. - Egipto</h4>
                    <p>El papiro de Rhind muestra problemas algebraicos egipcios. Usaban la palabra "aha" para representar cantidades desconocidas.</p>
                </div>
                
                <div class="timeline-item">
                    <h4>ğŸ›ï¸ 300 a.C. - Grecia</h4>
                    <p>Los griegos como Diofanto comenzaron a usar sÃ­mbolos abreviados para representar operaciones y cantidades desconocidas.</p>
                </div>
                
                <div class="timeline-item">
                    <h4>ğŸ•Œ 820 d.C. - Bagdad</h4>
                    <p>Al-Khwarizmi publica "Al-Kitab al-mukhtasar fi hisab al-jabr wal-muqabala", dando nombre al "Ã¡lgebra".</p>
                </div>
                
                <div class="timeline-item">
                    <h4>ğŸ° 1200 d.C. - Europa</h4>
                    <p>Fibonacci introduce los mÃ©todos algebraicos Ã¡rabes en Europa, revolutionando las matemÃ¡ticas occidentales.</p>
                </div>
                
                <div class="timeline-item">
                    <h4>ğŸ­ 1500 d.C. - Renacimiento</h4>
                    <p>FranÃ§ois ViÃ¨te introduce las letras como sÃ­mbolos algebraicos, creando la notaciÃ³n moderna que usamos hoy.</p>
                </div>
            </div>

            <div class="historical-card">
                <h3>ğŸ§™â€â™‚ï¸ Al-Khwarizmi: El Padre del Ãlgebra</h3>
                <p style="font-size: 16px; line-height: 1.6;">
                    Muhammad ibn Musa al-Khwarizmi (780-850 d.C.) fue un matemÃ¡tico persa que trabajÃ³ en Bagdad. 
                    Su libro sobre "al-jabr" (que significa "reuniÃ³n de partes rotas") le dio nombre a nuestra Ã¡lgebra. 
                    Al-jabr era originalmente un mÃ©todo para resolver ecuaciones moviendo tÃ©rminos de un lado al otro.
                </p>
                <br>
                <div style="text-align: center; margin: 20px 0;">
                    <div class="variable-box">al-jabr = Ã¡lgebra</div>
                    <div class="variable-box">algoritmo = Al-Khwarizmi</div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="showSection('basics')">
                    ğŸ¯ Explorar Conceptos BÃ¡sicos
                </button>
            </div>
        </div>

        <!-- SecciÃ³n Conceptos BÃ¡sicos -->
        <div class="section" id="basics">
            <h2 style="color: #4a5568; margin-bottom: 25px;">ğŸ¯ Conceptos Fundamentales</h2>
            
            <div class="story-card">
                <h3>ğŸ” Â¿QuÃ© es el Ãlgebra?</h3>
                <p style="font-size: 17px; line-height: 1.7;">
                    El Ã¡lgebra es como un lenguaje especial que nos permite describir relaciones matemÃ¡ticas usando sÃ­mbolos. 
                    En lugar de trabajar solo con nÃºmeros especÃ­ficos, podemos trabajar con <strong>variables</strong> que 
                    representan nÃºmeros que no conocemos aÃºn.
                </p>
                <br>
                <p style="font-size: 16px;">
                    Imagina que el Ã¡lgebra es como resolver un rompecabezas donde algunas piezas estÃ¡n ocultas, 
                    Â¡y tÃº tienes que usar las pistas para encontrarlas!
                </p>
            </div>

            <div class="activity-card">
                <h3>ğŸ—ï¸ Los Elementos BÃ¡sicos</h3>
                
                <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; margin: 20px 0;">
                    <h4>1. NÃºmeros</h4>
                    <p>Los nÃºmeros son los ladrillos bÃ¡sicos: 1, 2, 3, 4, 5...</p>
                    <div class="equation-display">2, 5, 10, 25</div>
                </div>

                <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; margin: 20px 0;">
                    <h4>2. Variables</h4>
                    <p>Las letras que representan nÃºmeros desconocidos: x, y, z, a, b...</p>
                    <div class="equation-display">x, y, n, t</div>
                </div>

                <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; margin: 20px 0;">
                    <h4>3. Operaciones</h4>
                    <p>Las acciones que realizamos: sumar (+), restar (-), multiplicar (Ã—), dividir (Ã·)</p>
                    <div class="equation-display">+ - Ã— Ã· =</div>
                </div>

                <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; margin: 20px 0;">
                    <h4>4. Expresiones</h4>
                    <p>Combinaciones de nÃºmeros, variables y operaciones</p>
                    <div class="equation-display">2x + 5, 3y - 7, 4a + 2b</div>
                </div>
            </div>

            <div class="activity-card">
                <h3>ğŸ² Actividad: De NÃºmeros a Ãlgebra</h3>
                <p>Vamos a ver cÃ³mo el Ã¡lgebra generaliza problemas aritmÃ©ticos:</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px;">
                        <h4>AritmÃ©tica</h4>
                        <p>5 + 3 = 8</p>
                        <p>10 + 7 = 17</p>
                        <p>Â¿CuÃ¡nto es 15 + 9?</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px;">
                        <h4>Ãlgebra</h4>
                        <p>a + b = c</p>
                        <p>x + y = z</p>
                        <p>Â¡Funciona con cualquier nÃºmero!</p>
                    </div>
                </div>

                <button class="btn" onclick="demonstrateTransition()">ğŸ”„ Ver la Magia</button>
                <div id="transitionResult" class="result-box"></div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="showSection('variables')">
                    ğŸ”¤ Ir a Variables
                </button>
            </div>
        </div>

        <!-- SecciÃ³n Variables -->
        <div class="section" id="variables">
            <h2 style="color: #4a5568; margin-bottom: 25px;">ğŸ”¤ El Mundo de las Variables</h2>
            
            <div class="story-card">
                <h3>ğŸ­ Las Variables: Actores MatemÃ¡ticos</h3>
                <p style="font-size: 17px; line-height: 1.7;">
                    Una variable es como un actor en una obra de teatro que puede interpretar diferentes personajes. 
                    La letra "x" puede ser 5 en una escena, 10 en otra, Â¡o cualquier nÃºmero que necesitemos!
                </p>
                <br>
                <p style="font-size: 16px;">
                    Las variables nos permiten escribir reglas matemÃ¡ticas que funcionan con muchos nÃºmeros diferentes, 
                    como una receta que puedes usar para hacer pasteles de cualquier tamaÃ±o.
                </p>
            </div>

            <div class="activity-card">
                <h3>ğŸª Laboratorio de Variables</h3>
                <p>Experimenta cambiando el valor de x y ve cÃ³mo afecta diferentes expresiones:</p>
                
                <div class="input-group">
                    <label>Valor de x:</label>
                    <input type="number" id="variableX" value="5" min="-50" max="50">
                    <button class="btn" onclick="calculateExpressions()">ğŸ§® Calcular</button>
                </div>

                <div id="expressionResults" style="margin-top: 20px;"></div>
                
                <div class="algebra-playground">
                    <h4>ğŸ¯ Expresiones para Probar:</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                        <div class="term" onclick="selectExpression('x + 3')">x + 3</div>
                        <div class="term" onclick="selectExpression('2x')">2x</div>
                        <div class="term" onclick="selectExpression('x - 7')">x - 7</div>
                        <div class="term" onclick="selectExpression('3x + 5')">3x + 5</div>
                        <div class="term" onclick="selectExpression('xÂ²')">xÂ²</div>
                        <div class="term" onclick="selectExpression('10 - x')">10 - x</div>
                    </div>
                </div>
            </div>

            <div class="historical-card">
                <h3>ğŸ“ Convenios de Nomenclatura</h3>
                <p style="font-size: 16px; line-height: 1.6;">
                    Â¿Por quÃ© usamos "x" para las variables? FranÃ§ois ViÃ¨te (1540-1603) estableciÃ³ la convenciÃ³n de usar las 
                    Ãºltimas letras del alfabeto (x, y, z) para cantidades desconocidas y las primeras (a, b, c) para 
                    cantidades conocidas.
                </p>
                <br>
                <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px;">
                    <p><strong>Variables comunes:</strong></p>
                    <p>â€¢ x, y, z â†’ nÃºmeros desconocidos</p>
                    <p>â€¢ a, b, c â†’ coeficientes conocidos</p>
                    <p>â€¢ n â†’ nÃºmeros naturales</p>
                    <p>â€¢ t â†’ tiempo</p>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="showSection('equations')">
                    âš–ï¸ Resolver Ecuaciones
                </button>
            </div>
        </div>

        <!-- SecciÃ³n Ecuaciones -->
        <div class="section" id="equations">
            <h2 style="color: #4a5568; margin-bottom: 25px;">âš–ï¸ El Arte de Resolver Ecuaciones</h2>
            
            <div class="story-card">
                <h3>âš–ï¸ Ecuaciones: Balanzas MatemÃ¡ticas</h3>
                <p style="font-size: 17px; line-height: 1.7;">
                    Una ecuaciÃ³n es como una balanza perfectamente equilibrada. Lo que estÃ¡ a la izquierda del signo "=" 
                    pesa exactamente lo mismo que lo que estÃ¡ a la derecha. Para resolver una ecuaciÃ³n, debemos mantener 
                    ese equilibrio mientras encontramos el valor de la variable.
                </p>
                <br>
                <p style="font-size: 16px;">
                    La regla de oro: lo que hagas a un lado de la ecuaciÃ³n, debes hacerlo tambiÃ©n al otro lado.
                </p>
            </div>

            <div class="balance-scale">
                <div class="scale-side" id="leftSide">x + 3</div>
                <div class="equals-sign">=</div>
                <div class="scale-side" id="rightSide">8</div>
            </div>

            <div class="activity-card">
                <h3>ğŸ”§ Taller de ResoluciÃ³n</h3>
                <p>Aprende a resolver ecuaciones paso a paso:</p>
                
                <div class="input-group">
                    <label>EcuaciÃ³n:</label>
                    <select id="equationSelect" onchange="loadEquation()">
                        <option value="x+3=8">x + 3 = 8</option>
                        <option value="2x=12">2x = 12</option>
                        <option value="x-5=7">x - 5 = 7</option>
                        <option value="3x+4=16">3x + 4 = 16</option>
                        <option value="2x-6=8">2x - 6 = 8</option>
                    </select>
                    <button class="btn" onclick="solveStepByStep()">ğŸ¯ Resolver</button>
                </div>

                <div id="solutionSteps" class="result-box"></div>
            </div>

            <div class="activity-card">
                <h3>ğŸ® Juego: Detective de Ecuaciones</h3>
                <p>Â¿Puedes encontrar el valor de x?</p>
                
                <div id="equationGame" class="quiz-card">
                    <h4 id="gameEquation">Presiona "Nueva EcuaciÃ³n" para comenzar</h4>
                    <div class="input-group" style="justify-content: center;">
                        <input type="number" id="gameAnswer" placeholder="x = ?">
                        <button class="btn" onclick="checkEquation()">ğŸ” Verificar</button>
                        <button class="btn" onclick="newEquation()">ğŸ² Nueva EcuaciÃ³n</button>
                    </div>
                    <div id="gameResult" style="margin-top: 15px; font-weight: bold;"></div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="showSection('practice')">
                    ğŸ® Practicar MÃ¡s
                </button>
            </div>
        </div>

        <!-- SecciÃ³n PrÃ¡ctica -->
        <div class="section" id="practice">
            <h2 style="color: #4a5568; margin-bottom: 25px;">ğŸ® Centro de Entrenamiento</h2>
            
            <div class="story-card">
                <h3>ğŸ‹ï¸â€â™‚ï¸ Â¡Hora de Entrenar!</h3>
                <p style="font-size: 17px; line-height: 1.7;">
                    Como cualquier habilidad, el Ã¡lgebra mejora con la prÃ¡ctica. AquÃ­ encontrarÃ¡s desafÃ­os 
                    de diferentes niveles para convertirte en un verdadero maestro algebraico.
                </p>
            </div>

            <div class="algebra-playground">
                <h3>ğŸ¯ DesafÃ­o RÃ¡pido</h3>
                <p>Resuelve tantas ecuaciones como puedas en 60 segundos:</p>
                
                <div style="display: flex; gap: 30px; justify-content: center; margin: 20px 0;">
                    <div style="text-align: center;">
                        <div style="font-size: 28px;">â±ï¸</div>
                        <div>Tiempo: <span id="timer">60</span>s</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 28px;">ğŸ¯</div>
                        <div>Correctas: <span id="correctCount">0</span></div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 28px;">ğŸ”¥</div>
                        <div>Racha: <span id="currentStreak">0</span></div>
                    </div>
                </div>

                <div id="quickChallenge" class="quiz-card">
                    <h4 id="challengeEquation">Â¡Presiona "Iniciar DesafÃ­o" para comenzar!</h4>
                    <div class="input-group" style="justify-content: center;">
                        <input type="number" id="challengeAnswer" placeholder="x = ?">
                        <button class="btn" onclick="checkChallenge()">âš¡ Responder</button>
                        <button class="btn" onclick="startChallenge()">ğŸš€ Iniciar DesafÃ­o</button>
                    </div>
                    <div id="challengeResult" style="margin-top: 15px; font-weight: bold;"></div>
                </div>
            </div>

            <div class="activity-card">
                <h3>ğŸ† DesafÃ­os Especiales</h3>
                
                <div class="quiz-card">
                    <p><strong>DesafÃ­o 1:</strong> Si x + 7 = 15, Â¿cuÃ¡l es el valor de 2x?</p>
                    <div class="input-group">
                        <input type="number" id="special1" placeholder="2x = ?">
                        <button class="btn" onclick="checkSpecial(1)">ğŸ¯ Verificar</button>
                    </div>
                    <div id="specialResult1" class="result-box" style="margin-top: 15px;"></div>
                </div>

                <div class="quiz-card">
                    <p><strong>DesafÃ­o 2:</strong> Si 3y - 4 = 11, Â¿cuÃ¡nto vale y + 2?</p>
                    <div class="input-group">
                        <input type="number" id="special2" placeholder="y + 2 = ?">
                        <button class="btn" onclick="checkSpecial(2)">ğŸ¯ Verificar</button>
                    </div>
                    <div id="specialResult2" class="result-box" style="margin-top: 15px;"></div>
                </div>

                <div class="quiz-card">
                    <p><strong>DesafÃ­o 3:</strong> En una tienda, si un libro cuesta x pesos y compras 3 libros mÃ¡s 5 pesos de envÃ­o, pagas 32 pesos en total. Â¿CuÃ¡nto cuesta cada libro?</p>
                    <div class="input-group">
                        <input type="number" id="special3" placeholder="x = ?">
                        <button class="btn" onclick="checkSpecial(3)">ğŸ¯ Verificar</button>
                    </div>
                    <div id="specialResult3" class="result-box" style="margin-top: 15px;"></div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="showSection('realworld')">
                    ğŸŒ Ver Aplicaciones Reales
                </button>
            </div>
        </div>

        <!-- SecciÃ³n Mundo Real -->
        <div class="section" id="realworld">
            <h2 style="color: #4a5568; margin-bottom: 25px;">ğŸŒ El Ãlgebra en la Vida Real</h2>
            
            <div class="story-card">
                <h3>ğŸŒŸ Â¡El Ãlgebra EstÃ¡ en Todas Partes!</h3>
                <p style="font-size: 17px; line-height: 1.7;">
                    Puede parecer que el Ã¡lgebra solo existe en los libros de matemÃ¡ticas, pero la realidad es que 
                    la usamos constantemente sin darnos cuenta. Desde calcular propinas hasta planear viajes, 
                    Â¡el Ã¡lgebra es nuestra compaÃ±era invisible!
                </p>
            </div>

            <div class="historical-card">
                <h3>ğŸ’° Finanzas Personales</h3>
                <p style="font-size: 16px; line-height: 1.6;">
                    Â¿Quieres ahorrar para comprar algo especial? El Ã¡lgebra te ayuda a planificar.
                </p>
                
                <div class="input-group">
                    <label>Precio del objetivo:</label>
                    <input type="number" id="targetPrice" value="500" min="1">
                    <label>pesos</label>
                </div>
                
                <div class="input-group">
                    <label>Ya tienes ahorrado:</label>
                    <input type="number" id="currentSavings" value="150" min="0">
                    <label>pesos</label>
                </div>
                
                <div class="input-group">
                    <label>Puedes ahorrar por semana:</label>
                    <input type="number" id="weeklySavings" value="25" min="1">
                    <label>pesos</label>
                </div>
                
                <button class="btn" onclick="calculateSavings()">ğŸ’° Calcular Plan</button>
                <div id="savingsResult" class="result-box"></div>
            </div>

            <div class="historical-card">
                <h3>ğŸ• Cocina y Recetas</h3>
                <p style="font-size: 16px; line-height: 1.6;">
                    Â¿Necesitas ajustar una receta para mÃ¡s personas? Â¡El Ã¡lgebra al rescate!
                </p>
                
                <div class="input-group">
                    <label>Receta original para:</label>
                    <input type="number" id="originalServing" value="4" min="1">
                    <label>personas</label>
                </div>
                
                <div class="input-group">
                    <label>Necesitas para:</label>
                    <input type="number" id="targetServing" value="6" min="1">
                    <label>personas</label>
                </div>
                
                <div class="input-group">
                    <label>Ingrediente original:</label>
                    <input type="number" id="originalAmount" value="200" min="1">
                    <label>gramos</label>
                </div>
                
                <button class="btn" onclick="calculateRecipe()">ğŸ• Ajustar Receta</button>
                <div id="recipeResult" class="result-box"></div>
            </div>

            <div class="historical-card">
                <h3>ğŸ“± TecnologÃ­a</h3>
                <p style="font-size: 16px; line-height: 1.6;">
                    Los algoritmos que usan las redes sociales, los videojuegos y las aplicaciones estÃ¡n llenos de Ã¡lgebra. 
                    Los programadores usan variables y ecuaciones para crear las apps que usas todos los dÃ­as.
                </p>
                <br>
                <div style="background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px;">
                    <p><strong>Ejemplos en tecnologÃ­a:</strong></p>
                    <p>â€¢ Algoritmos de recomendaciÃ³n (YouTube, Netflix)</p>
                    <p>â€¢ GrÃ¡ficos en videojuegos (posiciÃ³n de personajes)</p>
                    <p>â€¢ GPS y mapas (cÃ¡lculo de rutas)</p>
                    <p>â€¢ Inteligencia artificial (redes neuronales)</p>
                </div>
            </div>
        </div>
    </div>

    <div class="celebration-backdrop" id="celebrationBackdrop"></div>
    <div class="celebration" id="celebration">
        <h2>ğŸ‰ Â¡Excelente Trabajo!</h2>
        <p id="celebrationMessage"></p>
        <button class="btn" onclick="closeCelebration()">ğŸš€ Continuar</button>
    </div>

    <script>
        let totalScore = 0;
        let streak = 0;
        let level = "Aprendiz";
        let challengeActive = false;
        let challengeTimer;
        let challengeTime = 60;
        let correctAnswers = 0;
        let currentChallengeAnswer = 0;
        let selectedExpression = "";
        let currentGameAnswer = 0;

        // Crear partÃ­culas flotantes
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                container.appendChild(particle);
            }
        }

        function showSection(sectionName) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            
            document.getElementById(sectionName).classList.add('active');
            
            const tabs = document.querySelectorAll('.tab-btn');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Encontrar y activar la pestaÃ±a correcta
            tabs.forEach(tab => {
                if (tab.onclick && tab.onclick.toString().includes(sectionName)) {
                    tab.classList.add('active');
                }
            });
        }

        function updateScore(points) {
            totalScore += points;
            streak += 1;
            
            // Actualizar nivel
            if (totalScore >= 500) level = "Maestro Algebraico";
            else if (totalScore >= 300) level = "Experto en Ecuaciones";
            else if (totalScore >= 150) level = "Solucionador Avanzado";
            else if (totalScore >= 50) level = "Detective MatemÃ¡tico";
            
            document.getElementById('totalScore').textContent = totalScore;
            document.getElementById('streak').textContent = streak;
            document.getElementById('level').textContent = level;
        }

        function resetStreak() {
            streak = 0;
            document.getElementById('streak').textContent = streak;
        }

        function showCelebration(message) {
            document.getElementById('celebrationMessage').textContent = message;
            document.getElementById('celebrationBackdrop').style.display = 'block';
            document.getElementById('celebration').classList.add('show');
            
            setTimeout(() => {
                closeCelebration();
            }, 3000);
        }

        function closeCelebration() {
            document.getElementById('celebrationBackdrop').style.display = 'none';
            document.getElementById('celebration').classList.remove('show');
        }

        function demonstrateTransition() {
            const examples = [
                { arith: "7 + 4 = 11", algebra: "a + b = c" },
                { arith: "15 - 8 = 7", algebra: "x - y = z" },
                { arith: "6 Ã— 3 = 18", algebra: "m Ã— n = p" },
                { arith: "20 Ã· 4 = 5", algebra: "w Ã· v = u" }
            ];
            
            const randomExample = examples[Math.floor(Math.random() * examples.length)];
            
            document.getElementById('transitionResult').innerHTML = 
                `<div class="success">
                    <h4>ğŸ”„ De EspecÃ­fico a General</h4>
                    <p><strong>Ejemplo especÃ­fico:</strong> ${randomExample.arith}</p>
                    <p><strong>PatrÃ³n general:</strong> ${randomExample.algebra}</p>
                    <p>Â¡El Ã¡lgebra nos permite describir patrones que funcionan con cualquier nÃºmero!</p>
                </div>`;
            
            updateScore(10);
        }

        function calculateExpressions() {
            const x = parseFloat(document.getElementById('variableX').value);
            if (isNaN(x)) return;

            const expressions = [
                { expr: 'x + 3', value: x + 3 },
                { expr: '2x', value: 2 * x },
                { expr: 'x - 7', value: x - 7 },
                { expr: '3x + 5', value: 3 * x + 5 },
                { expr: 'xÂ²', value: x * x },
                { expr: '10 - x', value: 10 - x }
            ];

            let resultHTML = '<div class="success"><h4>ğŸ“Š Resultados para x = ' + x + '</h4>';
            expressions.forEach(item => {
                resultHTML += `<p>${item.expr} = ${item.value}</p>`;
            });
            resultHTML += '</div>';

            document.getElementById('expressionResults').innerHTML = resultHTML;
            updateScore(5);
        }

        function selectExpression(expr) {
            selectedExpression = expr;
            const terms = document.querySelectorAll('.term');
            terms.forEach(term => term.classList.remove('selected'));

            // Resaltar el tÃ©rmino que coincide con la expresiÃ³n (sin depender del objeto event)
            for (let term of terms) {
                if (term.textContent.trim() === expr) {
                    term.classList.add('selected');
                    break;
                }
            }
            
            const x = parseFloat(document.getElementById('variableX').value) || 5;
            let value;
            
            switch(expr) {
                case 'x + 3': value = x + 3; break;
                case '2x': value = 2 * x; break;
                case 'x - 7': value = x - 7; break;
                case '3x + 5': value = 3 * x + 5; break;
                case 'xÂ²': value = x * x; break;
                case '10 - x': value = 10 - x; break;
                default: value = 'â€”'; break;
            }
            
            showCelebration(`Con x = ${x}, la expresiÃ³n ${expr} = ${value}`);
        }

        function loadEquation() {
            const equation = document.getElementById('equationSelect').value;
            const [left, right] = equation.split('=');
            document.getElementById('leftSide').textContent = left;
            document.getElementById('rightSide').textContent = right;
        }

        function solveStepByStep() {
            const equation = document.getElementById('equationSelect').value;
            let steps = '';
            
            switch(equation) {
                case 'x+3=8':
                    steps = `
                        <div class="success">
                            <h4>ğŸ”§ SoluciÃ³n paso a paso</h4>
                            <p><strong>EcuaciÃ³n:</strong> x + 3 = 8</p>
                            <p><strong>Paso 1:</strong> Restar 3 de ambos lados</p>
                            <p>x + 3 - 3 = 8 - 3</p>
                            <p><strong>Paso 2:</strong> Simplificar</p>
                            <p>x = 5</p>
                            <p><strong>VerificaciÃ³n:</strong> 5 + 3 = 8 âœ“</p>
                        </div>`;
                    break;
                case '2x=12':
                    steps = `
                        <div class="success">
                            <h4>ğŸ”§ SoluciÃ³n paso a paso</h4>
                            <p><strong>EcuaciÃ³n:</strong> 2x = 12</p>
                            <p><strong>Paso 1:</strong> Dividir ambos lados entre 2</p>
                            <p>2x Ã· 2 = 12 Ã· 2</p>
                            <p><strong>Paso 2:</strong> Simplificar</p>
                            <p>x = 6</p>
                            <p><strong>VerificaciÃ³n:</strong> 2 Ã— 6 = 12 âœ“</p>
                        </div>`;
                    break;
                case 'x-5=7':
                    steps = `
                        <div class="success">
                            <h4>ğŸ”§ SoluciÃ³n paso a paso</h4>
                            <p><strong>EcuaciÃ³n:</strong> x - 5 = 7</p>
                            <p><strong>Paso 1:</strong> Sumar 5 a ambos lados</p>
                            <p>x - 5 + 5 = 7 + 5</p>
                            <p><strong>Paso 2:</strong> Simplificar</p>
                            <p>x = 12</p>
                            <p><strong>VerificaciÃ³n:</strong> 12 - 5 = 7 âœ“</p>
                        </div>`;
                    break;
                case '3x+4=16':
                    steps = `
                        <div class="success">
                            <h4>ğŸ”§ SoluciÃ³n paso a paso</h4>
                            <p><strong>EcuaciÃ³n:</strong> 3x + 4 = 16</p>
                            <p><strong>Paso 1:</strong> Restar 4 de ambos lados</p>
                            <p>3x + 4 - 4 = 16 - 4</p>
                            <p><strong>Paso 2:</strong> Simplificar</p>
                            <p>3x = 12</p>
                            <p><strong>Paso 3:</strong> Dividir ambos lados entre 3</p>
                            <p>3x Ã· 3 = 12 Ã· 3</p>
                            <p><strong>Paso 4:</strong> Resultado final</p>
                            <p>x = 4</p>
                            <p><strong>VerificaciÃ³n:</strong> 3 Ã— 4 + 4 = 16 âœ“</p>
                        </div>`;
                    break;
                case '2x-6=8':
                    steps = `
                        <div class="success">
                            <h4>ğŸ”§ SoluciÃ³n paso a paso</h4>
                            <p><strong>EcuaciÃ³n:</strong> 2x - 6 = 8</p>
                            <p><strong>Paso 1:</strong> Sumar 6 a ambos lados</p>
                            <p>2x - 6 + 6 = 8 + 6</p>
                            <p><strong>Paso 2:</strong> Simplificar</p>
                            <p>2x = 14</p>
                            <p><strong>Paso 3:</strong> Dividir ambos lados entre 2</p>
                            <p>2x Ã· 2 = 14 Ã· 2</p>
                            <p><strong>Paso 4:</strong> Resultado final</p>
                            <p>x = 7</p>
                            <p><strong>VerificaciÃ³n:</strong> 2 Ã— 7 - 6 = 8 âœ“</p>
                        </div>`;
                    break;
            }
            
            document.getElementById('solutionSteps').innerHTML = steps;
            updateScore(15);
        }

        function newEquation() {
            const equations = [
                { eq: "x + 4 = 9", answer: 5 },
                { eq: "2x = 10", answer: 5 },
                { eq: "x - 3 = 6", answer: 9 },
                { eq: "3x = 15", answer: 5 },
                { eq: "x + 8 = 12", answer: 4 },
                { eq: "5x = 20", answer: 4 },
                { eq: "x - 2 = 8", answer: 10 },
                { eq: "4x = 16", answer: 4 }
            ];
            
            const randomEq = equations[Math.floor(Math.random() * equations.length)];
            currentGameAnswer = randomEq.answer;
            document.getElementById('gameEquation').textContent = randomEq.eq;
            document.getElementById('gameResult').textContent = '';
            document.getElementById('gameAnswer').value = '';
        }

        function checkEquation() {
            const userAnswer = parseFloat(document.getElementById('gameAnswer').value);
            const resultDiv = document.getElementById('gameResult');
            
            if (isNaN(userAnswer)) {
                resultDiv.innerHTML = '<span style="color: #e74c3c;">Por favor, ingresa un nÃºmero</span>';
                return;
            }
            
            if (userAnswer === currentGameAnswer) {
                resultDiv.innerHTML = '<span style="color: #27ae60;">Â¡Correcto! ğŸ‰</span>';
                updateScore(20);
                showCelebration('Â¡Excelente! Has resuelto la ecuaciÃ³n correctamente.');
            } else {
                resultDiv.innerHTML = `<span style="color: #e74c3c;">Incorrecto. La respuesta es x = ${currentGameAnswer}</span>`;
                resetStreak();
            }
        }

        function startChallenge() {
            if (challengeActive) return;
            
            challengeActive = true;
            challengeTime = 60;
            correctAnswers = 0;
            
            document.getElementById('timer').textContent = challengeTime;
            document.getElementById('correctCount').textContent = correctAnswers;
            document.getElementById('currentStreak').textContent = 0;
            
            generateChallengeEquation();
            
            challengeTimer = setInterval(() => {
                challengeTime--;
                document.getElementById('timer').textContent = challengeTime;
                
                if (challengeTime <= 0) {
                    endChallenge();
                }
            }, 1000);
        }

        function generateChallengeEquation() {
            const equations = [
                { eq: "x + 2 = 7", answer: 5 },
                { eq: "x - 1 = 4", answer: 5 },
                { eq: "2x = 8", answer: 4 },
                { eq: "3x = 12", answer: 4 },
                { eq: "x + 5 = 9", answer: 4 },
                { eq: "x - 3 = 2", answer: 5 },
                { eq: "4x = 12", answer: 3 },
                { eq: "x + 1 = 8", answer: 7 }
            ];
            
            const randomEq = equations[Math.floor(Math.random() * equations.length)];
            currentChallengeAnswer = randomEq.answer;
            document.getElementById('challengeEquation').textContent = randomEq.eq;
            document.getElementById('challengeAnswer').value = '';
            document.getElementById('challengeResult').textContent = '';
        }

        function checkChallenge() {
            if (!challengeActive) return;
            
            const userAnswer = parseFloat(document.getElementById('challengeAnswer').value);
            const resultDiv = document.getElementById('challengeResult');
            
            if (isNaN(userAnswer)) {
                resultDiv.innerHTML = '<span style="color: #e74c3c;">Ingresa un nÃºmero</span>';
                return;
            }
            
            if (userAnswer === currentChallengeAnswer) {
                correctAnswers++;
                document.getElementById('correctCount').textContent = correctAnswers;
                document.getElementById('currentStreak').textContent = correctAnswers;
                resultDiv.innerHTML = '<span style="color: #27ae60;">Â¡Correcto!</span>';
                updateScore(10);
                generateChallengeEquation();
            } else {
                resultDiv.innerHTML = '<span style="color: #e74c3c;">Incorrecto</span>';
                generateChallengeEquation();
            }
        }

        function endChallenge() {
            challengeActive = false;
            clearInterval(challengeTimer);
            
            document.getElementById('challengeEquation').textContent = `Â¡DesafÃ­o terminado! Resolviste ${correctAnswers} ecuaciones correctamente.`;
            document.getElementById('challengeResult').innerHTML = 
                `<span style="color: #4ecdc4; font-size: 18px;">ğŸ† PuntuaciÃ³n final: ${correctAnswers} puntos</span>`;
            
            if (correctAnswers >= 10) {
                showCelebration('Â¡IncreÃ­ble! Eres un verdadero maestro del Ã¡lgebra.');
            } else if (correctAnswers >= 5) {
                showCelebration('Â¡Buen trabajo! Sigues mejorando.');
            } else {
                showCelebration('Â¡Sigue practicando! Cada intento te hace mÃ¡s fuerte.');
            }
        }

        function checkSpecial(challengeNum) {
            let userAnswer, correctAnswer, explanation, inputId, resultId;
            
            switch(challengeNum) {
                case 1:
                    // Si x + 7 = 15, entonces x = 8, y 2x = 16
                    userAnswer = parseFloat(document.getElementById('special1').value);
                    correctAnswer = 16;
                    explanation = "Si x + 7 = 15, entonces x = 8. Por lo tanto, 2x = 2 Ã— 8 = 16";
                    resultId = 'specialResult1';
                    break;
                case 2:
                    // Si 3y - 4 = 11, entonces 3y = 15, y = 5, y + 2 = 7
                    userAnswer = parseFloat(document.getElementById('special2').value);
                    correctAnswer = 7;
                    explanation = "Si 3y - 4 = 11, entonces 3y = 15, y = 5. Por lo tanto, y + 2 = 5 + 2 = 7";
                    resultId = 'specialResult2';
                    break;
                case 3:
                    // 3x + 5 = 32, entonces 3x = 27, x = 9
                    userAnswer = parseFloat(document.getElementById('special3').value);
                    correctAnswer = 9;
                    explanation = "La ecuaciÃ³n es 3x + 5 = 32. Restando 5: 3x = 27. Dividiendo entre 3: x = 9";
                    resultId = 'specialResult3';
                    break;
            }
            
            const resultDiv = document.getElementById(resultId);
            
            if (isNaN(userAnswer)) {
                resultDiv.innerHTML = '<div class="error">Por favor, ingresa un nÃºmero vÃ¡lido.</div>';
                return;
            }
            
            if (userAnswer === correctAnswer) {
                resultDiv.innerHTML = `<div class="success">
                    <h4>Â¡Correcto! ğŸ‰</h4>
                    <p>${explanation}</p>
                </div>`;
                updateScore(25);
            } else {
                resultDiv.innerHTML = `<div class="error">
                    <h4>Incorrecto</h4>
                    <p><strong>Respuesta correcta:</strong> ${correctAnswer}</p>
                    <p><strong>ExplicaciÃ³n:</strong> ${explanation}</p>
                </div>`;
                resetStreak();
            }
        }

        function calculateSavings() {
            const target = parseFloat(document.getElementById('targetPrice').value);
            const current = parseFloat(document.getElementById('currentSavings').value);
            const weekly = parseFloat(document.getElementById('weeklySavings').value);
            
            if (isNaN(target) || isNaN(current) || isNaN(weekly)) {
                document.getElementById('savingsResult').innerHTML = 
                    '<div class="error">Por favor, completa todos los campos con nÃºmeros vÃ¡lidos.</div>';
                return;
            }
            
            const remaining = target - current;
            const weeks = Math.ceil(remaining / weekly);
            
            if (remaining <= 0) {
                document.getElementById('savingsResult').innerHTML = 
                    `<div class="success">
                        <h4>ğŸ‰ Â¡Ya tienes suficiente dinero!</h4>
                        <p>Tienes ${current} y solo necesitas ${target}.</p>
                    </div>`;
            } else {
                document.getElementById('savingsResult').innerHTML = 
                    `<div class="success">
                        <h4>ğŸ“Š Tu Plan de Ahorro</h4>
                        <p><strong>Te faltan:</strong> ${remaining}</p>
                        <p><strong>Tiempo necesario:</strong> ${weeks} semanas</p>
                        <p><strong>EcuaciÃ³n:</strong> ${current} + ${weekly}x = ${target}</p>
                        <p><strong>Donde x =</strong> nÃºmero de semanas</p>
                    </div>`;
            }
            
            updateScore(15);
        }

        function calculateRecipe() {
            const original = parseFloat(document.getElementById('originalServing').value);
            const target = parseFloat(document.getElementById('targetServing').value);
            const amount = parseFloat(document.getElementById('originalAmount').value);
            
            if (isNaN(original) || isNaN(target) || isNaN(amount)) {
                document.getElementById('recipeResult').innerHTML = 
                    '<div class="error">Por favor, completa todos los campos con nÃºmeros vÃ¡lidos.</div>';
                return;
            }
            
            const multiplier = target / original;
            const newAmount = amount * multiplier;
            
            document.getElementById('recipeResult').innerHTML = 
                `<div class="success">
                    <h4>ğŸ• Receta Ajustada</h4>
                    <p><strong>Factor de conversiÃ³n:</strong> ${multiplier.toFixed(2)}</p>
                    <p><strong>Nuevo ingrediente:</strong> ${newAmount.toFixed(1)} gramos</p>
                    <p><strong>EcuaciÃ³n:</strong> ${amount} Ã— (${target}/${original}) = ${newAmount.toFixed(1)}</p>
                </div>`;
            
            updateScore(15);
        }

        // Inicializar la aplicaciÃ³n
        window.onload = function() {
            createParticles();
            loadEquation();
            
            // Agregar event listeners para Enter key
            const gameAnswerEl = document.getElementById('gameAnswer');
            if (gameAnswerEl) {
                gameAnswerEl.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') checkEquation();
                });
            }

            const challengeAnswerEl = document.getElementById('challengeAnswer');
            if (challengeAnswerEl) {
                challengeAnswerEl.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') checkChallenge();
                });
            }

            const variableXEl = document.getElementById('variableX');
            if (variableXEl) {
                variableXEl.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') calculateExpressions();
                });
            }
            
            // AÃ±adir event listeners para los tabs
            document.querySelectorAll('.tab-btn').forEach((btn, index) => {
                const sections = ['intro', 'history', 'basics', 'variables', 'equations', 'practice', 'realworld'];
                btn.addEventListener('click', () => {
                    showSection(sections[index]);
                });
            });
        };
    </script>
</body>
</html>
