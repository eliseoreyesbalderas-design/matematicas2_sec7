<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¬ TÃ©rminos Semejantes - Lab Algebraico</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 18px;
            color: #666;
            margin-bottom: 20px;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.3);
            position: relative;
            overflow: hidden;
        }

        .tab-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }

        .tab-btn:hover::before {
            left: 100%;
        }

        .tab-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 35px rgba(255, 107, 107, 0.4);
        }

        .tab-btn.active {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.4);
        }

        .score-display {
            background: linear-gradient(45deg, #ffd89b, #19547b);
            color: white;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin: 15px 0;
            font-size: 18px;
            font-weight: bold;
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 35px;
            margin: 25px 0;
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
            display: none;
            animation: slideInUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .section::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #f5576c);
            border-radius: 25px;
            z-index: -1;
            animation: borderGlow 3s ease-in-out infinite alternate;
        }

        .section.active {
            display: block;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes borderGlow {
            0% { opacity: 0.5; }
            100% { opacity: 0.8; }
        }

        .story-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            color: white;
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.3);
            position: relative;
            overflow: hidden;
        }

        .story-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: shimmer 2s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        .activity-card {
            background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            color: white;
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.3);
            position: relative;
        }

        .input-group {
            display: flex;
            gap: 15px;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        input[type="text"], input[type="number"] {
            padding: 14px 18px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            background: rgba(255,255,255,0.95);
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        input[type="text"]:focus, input[type="number"]:focus {
            outline: none;
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 20px rgba(78, 205, 196, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        .btn:hover::after {
            width: 200px;
            height: 200px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(78, 205, 196, 0.4);
        }

        .btn:active {
            transform: translateY(0px);
        }

        .result-box {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            color: #333;
            min-height: 60px;
            font-size: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .result-box.success {
            border-left: 5px solid #27ae60;
            background: linear-gradient(135deg, #d5f4e6 0%, #feffff 100%);
        }

        .result-box.error {
            border-left: 5px solid #e74c3c;
            background: linear-gradient(135deg, #fadbd8 0%, #feffff 100%);
        }

        .term-visual {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .term-box {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px 20px;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            min-width: 100px;
            text-align: center;
        }

        .term-box:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .term-box.similar {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            animation: pulse 2s ease-in-out infinite;
        }

        .term-box.not-similar {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            animation: shake 0.5s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .equation-display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            font-size: 24px;
            text-align: center;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
        }

        .drag-area {
            background: rgba(255,255,255,0.1);
            border: 3px dashed rgba(255,255,255,0.5);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .drag-area.drag-over {
            background: rgba(78, 205, 196, 0.3);
            border-color: rgba(78, 205, 196, 0.8);
        }

        .draggable-term {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 10px;
            cursor: grab;
            user-select: none;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .draggable-term:active {
            cursor: grabbing;
        }

        .draggable-term.dragging {
            opacity: 0.5;
            transform: rotate(10deg);
        }

        .quiz-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            color: #333;
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }

        .quiz-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.2);
        }

        .progress-bar {
            width: 100%;
            height: 25px;
            background: rgba(255,255,255,0.3);
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #44a08d);
            width: 0%;
            transition: width 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: progressShine 2s ease-in-out infinite;
        }

        @keyframes progressShine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .variable-highlight {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            padding: 2px 6px;
            border-radius: 5px;
            font-weight: bold;
        }

        .coefficient-highlight {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            padding: 2px 6px;
            border-radius: 5px;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2.2rem; }
            .nav-tabs { gap: 8px; }
            .tab-btn { padding: 10px 18px; font-size: 14px; }
            .container { padding: 15px; }
            .section { padding: 20px; margin: 15px 0; }
            .input-group { flex-direction: column; align-items: stretch; }
            .input-group > * { margin: 5px 0; }
            .term-visual { flex-direction: column; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ”¬ TÃ©rminos Semejantes - Laboratorio Algebraico</h1>
        <p class="subtitle">Â¡ConviÃ©rtete en un cientÃ­fico de las matemÃ¡ticas y descubre los secretos del Ã¡lgebra!</p>
        
        <div class="nav-tabs">
            <button class="tab-btn active" onclick="showSection('intro')">ğŸŒŸ MisiÃ³n</button>
            <button class="tab-btn" onclick="showSection('theory')">ğŸ“š TeorÃ­a</button>
            <button class="tab-btn" onclick="showSection('identify')">ğŸ” Identificar</button>
            <button class="tab-btn" onclick="showSection('combine')">âš—ï¸ Combinar</button>
            <button class="tab-btn" onclick="showSection('practice')">ğŸ® PrÃ¡ctica</button>
            <button class="tab-btn" onclick="showSection('realworld')">ğŸŒ Mundo Real</button>
        </div>

        <div class="score-display">
            ğŸ† Puntos de Laboratorio: <span id="totalScore">0</span> | ğŸ”¥ Racha: <span id="streak">0</span> | ğŸ§ª Nivel: <span id="level">Aprendiz</span>
        </div>
    </div>

    <div class="container">
        <!-- SecciÃ³n IntroducciÃ³n -->
        <div class="section active" id="intro">
            <h2 style="text-align: center; color: #4a5568; margin-bottom: 25px;">ğŸŒŸ Bienvenido al Laboratorio de Ãlgebra</h2>
            
            <div class="story-card">
                <h3>ğŸ”¬ Tu MisiÃ³n CientÃ­fica</h3>
                <p style="font-size: 18px; line-height: 1.8;">
                    Eres un cientÃ­fico novato en el Laboratorio de Ãlgebra mÃ¡s avanzado del mundo. Tu misiÃ³n es dominar 
                    el arte de identificar y combinar <strong>tÃ©rminos semejantes</strong> para resolver ecuaciones 
                    que podrÃ­an cambiar el futuro de las matemÃ¡ticas.
                </p>
                <br>
                <p style="font-size: 16px; line-height: 1.6;">
                    Los tÃ©rminos semejantes son como elementos quÃ­micos que solo pueden combinarse con otros de la misma familia. 
                    Â¿EstÃ¡s listo para descubrir este increÃ­ble mundo algebraico?
                </p>
            </div>

            <div class="activity-card">
                <h3>ğŸ¯ Â¿QuÃ© AprenderÃ¡s?</h3>
                <div style="font-size: 16px; line-height: 1.8;">
                    <p>âœ¨ Identificar tÃ©rminos semejantes como un detective matemÃ¡tico</p>
                    <p>ğŸ”§ Combinar tÃ©rminos para simplificar expresiones algebraicas</p>
                    <p>ğŸ® Resolver problemas interactivos y emocionantes</p>
                    <p>ğŸŒ Descubrir cÃ³mo se usan en el mundo real</p>
                    <p>ğŸ† Completar desafÃ­os Ã©picos y ganar puntos de laboratorio</p>
                </div>
            </div>

            <div class="equation-display">
                Ejemplo: 3x + 2y + 5x - y = 8x + y
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="showSection('theory')" style="font-size: 20px; padding: 18px 36px;">
                    ğŸš€ Â¡Comenzar InvestigaciÃ³n!
                </button>
            </div>
        </div>

        <!-- SecciÃ³n TeorÃ­a -->
        <div class="section" id="theory">
            <h2 style="color: #4a5568; margin-bottom: 25px;">ğŸ“š Fundamentos TeÃ³ricos</h2>
            
            <div class="story-card">
                <h3>ğŸ§ª Â¿QuÃ© son los TÃ©rminos Semejantes?</h3>
                <p style="font-size: 17px; line-height: 1.7;">
                    Los tÃ©rminos semejantes son como <strong>hermanos gemelos</strong> en el Ã¡lgebra. 
                    Son tÃ©rminos que tienen exactamente las mismas variables elevadas a las mismas potencias, 
                    pero pueden tener coeficientes diferentes.
                </p>
                <br>
                <div style="font-size: 18px; font-weight: bold;">
                    Ejemplo: <span class="coefficient-highlight">5</span><span class="variable-highlight">x</span> y <span class="coefficient-highlight">-3</span><span class="variable-highlight">x</span> son tÃ©rminos semejantes
                </div>
            </div>

            <div class="activity-card">
                <h3>ğŸ” AnatomÃ­a de un TÃ©rmino</h3>
                <p>Cada tÃ©rmino algebraico tiene partes importantes:</p>
                
                <div class="equation-display">
                    <span class="coefficient-highlight">7</span><span class="variable-highlight">xÂ²y</span>
                </div>
                
                <div style="margin: 20px 0; font-size: 16px;">
                    <p><span class="coefficient-highlight">7</span> = <strong>Coeficiente</strong> (el nÃºmero que multiplica)</p>
                    <p><span class="variable-highlight">xÂ²y</span> = <strong>Parte literal</strong> (variables con sus exponentes)</p>
                </div>
                
                <div class="result-box">
                    <strong>Regla de Oro:</strong> Dos tÃ©rminos son semejantes si tienen 
                    <em>exactamente la misma parte literal</em>, sin importar el coeficiente.
                </div>
            </div>

            <div class="activity-card">
                <h3>ğŸ¨ Explorador de TÃ©rminos</h3>
                <p>Analiza estos tÃ©rminos y observa quÃ© los hace semejantes:</p>
                
                <div class="term-visual">
                    <div class="term-box" onclick="highlightSimilar('x')">3x</div>
                    <div class="term-box" onclick="highlightSimilar('x2')">2xÂ²</div>
                    <div class="term-box" onclick="highlightSimilar('x')">-5x</div>
                    <div class="term-box" onclick="highlightSimilar('xy')">4xy</div>
                    <div class="term-box" onclick="highlightSimilar('x2')">xÂ²</div>
                    <div class="term-box" onclick="highlightSimilar('xy')">-2xy</div>
                </div>
                
                <button class="btn" onclick="resetTerms()">ğŸ”„ Reiniciar</button>
                
                <div id="termAnalysis" class="result-box"></div>
            </div>
        </div>

        <!-- SecciÃ³n Identificar -->
        <div class="section" id="identify">
            <h2 style="color: #4a5568; margin-bottom: 25px;">ğŸ” Detective de TÃ©rminos</h2>
            
            <div class="story-card">
                <h3>ğŸ•µï¸ MisiÃ³n: IdentificaciÃ³n</h3>
                <p style="font-size: 17px; line-height: 1.7;">
                    Como detective algebraico, tu trabajo es identificar cuÃ¡les tÃ©rminos pueden trabajar juntos. 
                    Recuerda: solo los tÃ©rminos con la misma parte literal son "compatibles" para combinarse.
                </p>
            </div>

            <div class="activity-card">
                <h3>âš¡ IdentificaciÃ³n RÃ¡pida</h3>
                <p>Â¿Son estos tÃ©rminos semejantes?</p>
                
                <div id="quickIdentify" class="quiz-card">
                    <div class="equation-display" id="termsToCompare">
                        Presiona "Nueva Pregunta" para comenzar
                    </div>
                    
                    <div style="display: flex; gap: 20px; justify-content: center; margin: 20px 0; flex-wrap: wrap;">
                        <button class="btn" onclick="answerSimilarity(true)">âœ… SÃ­, son semejantes</button>
                        <button class="btn" onclick="answerSimilarity(false)">âŒ No son semejantes</button>
                        <button class="btn" onclick="newSimilarityQuestion()">ğŸ² Nueva Pregunta</button>
                    </div>
                    
                    <div id="similarityResult" style="text-align: center; font-weight: bold;"></div>
                </div>
            </div>
        </div>

        <!-- SecciÃ³n Combinar -->
        <div class="section" id="combine">
            <h2 style="color: #4a5568; margin-bottom: 25px;">âš—ï¸ Laboratorio de CombinaciÃ³n</h2>
            
            <div class="story-card">
                <h3>ğŸ”¬ FusiÃ³n de TÃ©rminos</h3>
                <p style="font-size: 17px; line-height: 1.7;">
                    Ahora que sabes identificar tÃ©rminos semejantes, es hora de aprender a combinarlos. 
                    Cuando combinas tÃ©rminos semejantes, sumas o restas sus coeficientes y mantienes la misma parte literal.
                </p>
            </div>

            <div class="activity-card">
                <h3>ğŸ§® Calculadora de Combinaciones</h3>
                <p>Combina estos tÃ©rminos semejantes:</p>
                
                <div id="combineExercise" class="quiz-card">
                    <div class="equation-display" id="termsToCombine">
                        Presiona "Nuevo Ejercicio" para comenzar
                    </div>
                    
                    <div class="input-group">
                        <input type="text" id="combineAnswer" placeholder="Escribe tu respuesta aquÃ­">
                        <button class="btn" onclick="checkCombination()">ğŸ” Verificar</button>
                        <button class="btn" onclick="newCombineExercise()">ğŸ² Nuevo Ejercicio</button>
                    </div>
                    
                    <div id="combineResult" style="text-align: center; font-weight: bold;"></div>
                </div>
            </div>
        </div>

        <!-- SecciÃ³n PrÃ¡ctica -->
        <div class="section" id="practice">
            <h2 style="color: #4a5568; margin-bottom: 25px;">ğŸ® Campo de Entrenamiento</h2>
            
            <div class="story-card">
                <h3>ğŸ‹ï¸ Ejercicios de PrÃ¡ctica</h3>
                <p style="font-size: 17px; line-height: 1.7;">
                    Pon a prueba todo lo que has aprendido con estos ejercicios completos. 
                    Simplifica las siguientes expresiones combinando tÃ©rminos semejantes.
                </p>
            </div>

            <div class="activity-card">
                <h3>ğŸ¯ Simplifica la ExpresiÃ³n</h3>
                
                <div id="practiceExercise" class="quiz-card">
                    <div class="equation-display" id="expressionToSimplify">
                        Presiona "Nuevo Problema" para comenzar
                    </div>
                    
                    <div class="input-group">
                        <input type="text" id="practiceAnswer" placeholder="ExpresiÃ³n simplificada">
                        <button class="btn" onclick="checkPractice()">ğŸ” Verificar</button>
                        <button class="btn" onclick="newPracticeExercise()">ğŸ² Nuevo Problema</button>
                    </div>
                    
                    <div id="practiceResult" style="text-align: center; font-weight: bold;"></div>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="practiceProgress"></div>
                </div>
                <p style="text-align: center; margin-top: 10px;">Progreso: <span id="practiceCount">0</span>/10 ejercicios completados</p>
            </div>
        </div>

        <!-- SecciÃ³n Mundo Real -->
        <div class="section" id="realworld">
            <h2 style="color: #4a5568; margin-bottom: 25px;">ğŸŒ Aplicaciones en el Mundo Real</h2>
            
            <div class="story-card">
                <h3>ğŸ—ï¸ ConstrucciÃ³n de una Casa</h3>
                <p style="font-size: 17px; line-height: 1.7;">
                    Un arquitecto necesita calcular el perÃ­metro total de una casa. 
                    La fachada tiene 3x metros, cada lado tiene 2x metros, y la parte trasera tiene 3x metros. 
                    Â¿CuÃ¡l es el perÃ­metro total?
                </p>
                <div class="equation-display">3x + 2x + 3x + 2x = 10x metros</div>
            </div>

            <div class="activity-card">
                <h3>ğŸ’° Problema Financiero</h3>
                <p>Ana tiene diferentes inversiones: 5x euros en acciones, 3y euros en bonos, 
                2x euros en un fondo de inversiÃ³n y 7y euros en una cuenta de ahorros. 
                Â¿CuÃ¡nto tiene en total?</p>
                
                <div class="input-group">
                    <input type="text" id="financialAnswer" placeholder="Total de inversiones">
                    <button class="btn" onclick="checkFinancial()">ğŸ’¡ Verificar</button>
                </div>
                
                <div id="financialResult" class="result-box"></div>
            </div>

            <div class="activity-card">
                <h3>ğŸš— Problema de Velocidad</h3>
                <p>Un coche viaja durante 2t horas por la maÃ±ana, 3t horas por la tarde, 
                y t horas por la noche. Â¿CuÃ¡nto tiempo total viajÃ³?</p>
                
                <div class="input-group">
                    <input type="text" id="timeAnswer" placeholder="Tiempo total">
                    <button class="btn" onclick="checkTime()">â±ï¸ Verificar</button>
                </div>
                
                <div id="timeResult" class="result-box"></div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales del juego
        let gameData = {
            score: 0,
            streak: 0,
            level: 'Aprendiz',
            practiceCount: 0,
            currentQuestion: null,
            currentAnswer: null
        };

        // Preguntas para identificaciÃ³n rÃ¡pida
        const similarityQuestions = [
            { terms: ['3x', '5x'], answer: true, explanation: 'Ambos tienen la misma variable x' },
            { terms: ['2yÂ²', '-7yÂ²'], answer: true, explanation: 'Ambos tienen yÂ²' },
            { terms: ['4x', '3y'], answer: false, explanation: 'Variables diferentes: x â‰  y' },
            { terms: ['5xy', '2xy'], answer: true, explanation: 'Ambos tienen xy' },
            { terms: ['xÂ²', 'xÂ³'], answer: false, explanation: 'Diferentes exponentes: xÂ² â‰  xÂ³' },
            { terms: ['7', '12'], answer: true, explanation: 'Ambos son tÃ©rminos constantes' },
            { terms: ['3ab', '5ba'], answer: true, explanation: 'ab = ba (propiedad conmutativa)' },
            { terms: ['2xÂ²y', '4xÂ²y'], answer: true, explanation: 'Ambos tienen xÂ²y' }
        ];

        // Ejercicios para combinar tÃ©rminos
        const combineExercises = [
            { expression: '3x + 5x', answer: '8x', explanation: '3 + 5 = 8, manteniendo x' },
            { expression: '7y - 2y', answer: '5y', explanation: '7 - 2 = 5, manteniendo y' },
            { expression: '4xÂ² + 3xÂ²', answer: '7xÂ²', explanation: '4 + 3 = 7, manteniendo xÂ²' },
            { expression: '6xy - 4xy', answer: '2xy', explanation: '6 - 4 = 2, manteniendo xy' },
            { expression: '8 + 3', answer: '11', explanation: 'Suma de constantes' },
            { expression: '5aÂ² - 3aÂ²', answer: '2aÂ²', explanation: '5 - 3 = 2, manteniendo aÂ²' }
        ];

        // Ejercicios de prÃ¡ctica mÃ¡s complejos
        const practiceExercises = [
            { expression: '2x + 3y + 5x - y', answer: '7x + 2y', explanation: '(2x + 5x) + (3y - y) = 7x + 2y' },
            { expression: '4a + 2b - a + 3b', answer: '3a + 5b', explanation: '(4a - a) + (2b + 3b) = 3a + 5b' },
            { expression: '7xÂ² + 3x + 2xÂ² - x', answer: '9xÂ² + 2x', explanation: '(7xÂ² + 2xÂ²) + (3x - x) = 9xÂ² + 2x' },
            { expression: '5m - 3n + 2m + 4n', answer: '7m + n', explanation: '(5m + 2m) + (-3n + 4n) = 7m + n' },
            { expression: '3xy + 2x - xy + 4x', answer: '2xy + 6x', explanation: '(3xy - xy) + (2x + 4x) = 2xy + 6x' },
            { expression: '8 - 3t + 5 + 7t', answer: '13 + 4t', explanation: '(8 + 5) + (-3t + 7t) = 13 + 4t' }
        ];

        // Funciones principales del juego
        function showSection(sectionName) {
            // Ocultar todas las secciones
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Mostrar la secciÃ³n seleccionada
            document.getElementById(sectionName).classList.add('active');
            
            // Actualizar botones de navegaciÃ³n
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // FunciÃ³n para resaltar tÃ©rminos similares
        function highlightSimilar(type) {
            resetTerms();
            const termBoxes = document.querySelectorAll('.term-box');
            let similarCount = 0;
            
            termBoxes.forEach(box => {
                const term = box.textContent;
                let isSimilar = false;
                
                switch(type) {
                    case 'x':
                        isSimilar = term.includes('x') && !term.includes('xÂ²') && !term.includes('xy');
                        break;
                    case 'x2':
                        isSimilar = term.includes('xÂ²');
                        break;
                    case 'xy':
                        isSimilar = term.includes('xy');
                        break;
                }
                
                if (isSimilar) {
                    box.classList.add('similar');
                    similarCount++;
                } else {
                    box.classList.add('not-similar');
                }
            });
            
            // Mostrar anÃ¡lisis
            const analysis = document.getElementById('termAnalysis');
            analysis.innerHTML = `
                <strong>AnÃ¡lisis:</strong> Encontraste ${similarCount} tÃ©rminos semejantes del tipo "${type}". 
                Los tÃ©rminos semejantes pueden combinarse porque tienen la misma parte literal.
            `;
            analysis.className = 'result-box success';
            
            updateScore(10);
        }

        function resetTerms() {
            const termBoxes = document.querySelectorAll('.term-box');
            termBoxes.forEach(box => {
                box.classList.remove('similar', 'not-similar');
            });
            document.getElementById('termAnalysis').innerHTML = '';
        }

        // FunciÃ³n para nueva pregunta de similitud
        function newSimilarityQuestion() {
            const question = similarityQuestions[Math.floor(Math.random() * similarityQuestions.length)];
            gameData.currentQuestion = question;
            
            document.getElementById('termsToCompare').textContent = 
                `${question.terms[0]}  y  ${question.terms[1]}`;
            document.getElementById('similarityResult').innerHTML = '';
        }

        function answerSimilarity(userAnswer) {
            if (!gameData.currentQuestion) {
                alert('Â¡Primero presiona "Nueva Pregunta"!');
                return;
            }
            
            const correct = userAnswer === gameData.currentQuestion.answer;
            const resultDiv = document.getElementById('similarityResult');
            
            if (correct) {
                resultDiv.innerHTML = `
                    <span style="color: #27ae60;">âœ… Â¡Correcto!</span><br>
                    ${gameData.currentQuestion.explanation}
                `;
                updateScore(20);
                updateStreak(true);
            } else {
                resultDiv.innerHTML = `
                    <span style="color: #e74c3c;">âŒ Incorrecto</span><br>
                    ${gameData.currentQuestion.explanation}
                `;
                updateStreak(false);
            }
        }

        // FunciÃ³n para nuevo ejercicio de combinaciÃ³n
        function newCombineExercise() {
            const exercise = combineExercises[Math.floor(Math.random() * combineExercises.length)];
            gameData.currentQuestion = exercise;
            
            document.getElementById('termsToCombine').textContent = exercise.expression;
            document.getElementById('combineAnswer').value = '';
            document.getElementById('combineResult').innerHTML = '';
        }

        function checkCombination() {
            if (!gameData.currentQuestion) {
                alert('Â¡Primero presiona "Nuevo Ejercicio"!');
                return;
            }
            
            const userAnswer = document.getElementById('combineAnswer').value.trim();
            const correct = userAnswer.toLowerCase().replace(/\s/g, '') === 
                           gameData.currentQuestion.answer.toLowerCase().replace(/\s/g, '');
            const resultDiv = document.getElementById('combineResult');
            
            if (correct) {
                resultDiv.innerHTML = `
                    <span style="color: #27ae60;">âœ… Â¡Excelente!</span><br>
                    ${gameData.currentQuestion.explanation}
                `;
                updateScore(30);
                updateStreak(true);
            } else {
                resultDiv.innerHTML = `
                    <span style="color: #e74c3c;">âŒ Intenta de nuevo</span><br>
                    Respuesta correcta: ${gameData.currentQuestion.answer}<br>
                    ${gameData.currentQuestion.explanation}
                `;
                updateStreak(false);
            }
        }

        // FunciÃ³n para nuevo ejercicio de prÃ¡ctica
        function newPracticeExercise() {
            const exercise = practiceExercises[Math.floor(Math.random() * practiceExercises.length)];
            gameData.currentQuestion = exercise;
            
            document.getElementById('expressionToSimplify').textContent = exercise.expression;
            document.getElementById('practiceAnswer').value = '';
            document.getElementById('practiceResult').innerHTML = '';
        }

        function checkPractice() {
            if (!gameData.currentQuestion) {
                alert('Â¡Primero presiona "Nuevo Problema"!');
                return;
            }
            
            const userAnswer = document.getElementById('practiceAnswer').value.trim();
            const correct = userAnswer.toLowerCase().replace(/\s/g, '') === 
                           gameData.currentQuestion.answer.toLowerCase().replace(/\s/g, '');
            const resultDiv = document.getElementById('practiceResult');
            
            if (correct) {
                resultDiv.innerHTML = `
                    <span style="color: #27ae60;">âœ… Â¡Perfecto!</span><br>
                    ${gameData.currentQuestion.explanation}
                `;
                updateScore(50);
                updateStreak(true);
                updatePracticeProgress();
            } else {
                resultDiv.innerHTML = `
                    <span style="color: #e74c3c;">âŒ Revisa tu respuesta</span><br>
                    Respuesta correcta: ${gameData.currentQuestion.answer}<br>
                    ${gameData.currentQuestion.explanation}
                `;
                updateStreak(false);
            }
        }

        function updatePracticeProgress() {
            gameData.practiceCount++;
            const progress = (gameData.practiceCount / 10) * 100;
            
            document.getElementById('practiceProgress').style.width = progress + '%';
            document.getElementById('practiceCount').textContent = gameData.practiceCount;
            
            if (gameData.practiceCount >= 10) {
                setTimeout(() => {
                    alert('Â¡Felicitaciones! Has completado todos los ejercicios de prÃ¡ctica. ğŸ†');
                    gameData.practiceCount = 0;
                    updatePracticeProgress();
                }, 1000);
            }
        }

        // Funciones para problemas del mundo real
        function checkFinancial() {
            const userAnswer = document.getElementById('financialAnswer').value.trim();
            const correctAnswer = '7x + 10y';
            const resultDiv = document.getElementById('financialResult');
            
            if (userAnswer.toLowerCase().replace(/\s/g, '') === correctAnswer.toLowerCase().replace(/\s/g, '')) {
                resultDiv.innerHTML = `
                    <strong>âœ… Â¡Correcto!</strong><br>
                    Ana tiene un total de <strong>7x + 10y euros</strong><br>
                    (5x + 2x) + (3y + 7y) = 7x + 10y
                `;
                resultDiv.className = 'result-box success';
                updateScore(40);
            } else {
                resultDiv.innerHTML = `
                    <strong>âŒ Intenta de nuevo</strong><br>
                    Suma los tÃ©rminos semejantes: (5x + 2x) + (3y + 7y)
                `;
                resultDiv.className = 'result-box error';
            }
        }

        function checkTime() {
            const userAnswer = document.getElementById('timeAnswer').value.trim();
            const correctAnswer = '6t';
            const resultDiv = document.getElementById('timeResult');
            
            if (userAnswer.toLowerCase().replace(/\s/g, '') === correctAnswer.toLowerCase().replace(/\s/g, '')) {
                resultDiv.innerHTML = `
                    <strong>âœ… Â¡Excelente!</strong><br>
                    El tiempo total es <strong>6t horas</strong><br>
                    2t + 3t + t = 6t
                `;
                resultDiv.className = 'result-box success';
                updateScore(40);
            } else {
                resultDiv.innerHTML = `
                    <strong>âŒ Revisa tu cÃ¡lculo</strong><br>
                    Suma todos los tÃ©rminos: 2t + 3t + t = ?
                `;
                resultDiv.className = 'result-box error';
            }
        }

        // Funciones del sistema de puntuaciÃ³n
        function updateScore(points) {
            gameData.score += points;
            document.getElementById('totalScore').textContent = gameData.score;
            updateLevel();
        }

        function updateStreak(correct) {
            if (correct) {
                gameData.streak++;
            } else {
                gameData.streak = 0;
            }
            document.getElementById('streak').textContent = gameData.streak;
        }

        function updateLevel() {
            let newLevel = 'Aprendiz';
            
            if (gameData.score >= 1000) newLevel = 'Maestro Algebraico';
            else if (gameData.score >= 500) newLevel = 'Experto';
            else if (gameData.score >= 200) newLevel = 'Investigador';
            else if (gameData.score >= 100) newLevel = 'CientÃ­fico Junior';
            
            if (newLevel !== gameData.level) {
                gameData.level = newLevel;
                document.getElementById('level').textContent = newLevel;
                
                // Celebrar subida de nivel
                setTimeout(() => {
                    alert(`ğŸ‰ Â¡Felicitaciones! Has alcanzado el nivel: ${newLevel}`);
                }, 500);
            }
        }

        // Inicializar la aplicaciÃ³n
        document.addEventListener('DOMContentLoaded', function() {
            // Cargar primera pregunta en cada secciÃ³n
            newSimilarityQuestion();
            newCombineExercise();
            newPracticeExercise();
            
            // Permitir presionar Enter en los campos de texto
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const activeElement = document.activeElement;
                    if (activeElement.id === 'combineAnswer') {
                        checkCombination();
                    } else if (activeElement.id === 'practiceAnswer') {
                        checkPractice();
                    } else if (activeElement.id === 'financialAnswer') {
                        checkFinancial();
                    } else if (activeElement.id === 'timeAnswer') {
                        checkTime();
                    }
                }
            });
        });
    </script>
</body>
</html>